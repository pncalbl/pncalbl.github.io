

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon-t.png">
  <link rel="icon" href="/img/favicon-t.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="pncalbl">
  <meta name="keywords" content="计算机,开发,编程,代码,博客,技术">
  
  <title>JavaWeb 学习 - pncalbl</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.6.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"pncalbl.github.io","root":"/","version":"1.8.10","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/rss2.xml" title="pncalbl" type="application/rss+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>pncalbl</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/post.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="JavaWeb 学习">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      pncalbl
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-11-22 00:00" pubdate>
        2020年11月22日 凌晨
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      15.1k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      233
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">JavaWeb 学习</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：6 个月前
                
              </p>
            
            <div class="markdown-body">
              <h1 id="JavaWeb-学习"><a href="#JavaWeb-学习" class="headerlink" title="JavaWeb 学习"></a>JavaWeb 学习</h1><h2 id="1-Tomcat"><a href="#1-Tomcat" class="headerlink" title="1, Tomcat"></a>1, Tomcat</h2><p> <strong>JavaWeb第1天</strong></p>
<p><strong>date: 2020.11.22</strong></p>
<h4 id="1-1-安装"><a href="#1-1-安装" class="headerlink" title="1.1 安装"></a>1.1 安装</h4><p>tomcat官网: <a target="_blank" rel="noopener" href="http://tomcat.apache.org/index.html">Apache Tomcat® - Welcome!</a></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/tomcat%E4%B8%8B%E8%BD%BD.png" alt="image-20201122174747037"></p>
<p>下载完之后,解压至你想要安装的目录</p>
<h4 id="1-2-Tomcat的启动和配置"><a href="#1-2-Tomcat的启动和配置" class="headerlink" title="1.2 Tomcat的启动和配置"></a>1.2 Tomcat的启动和配置</h4><ol>
<li><p>文件夹的作用<br><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/tomcat%E8%A7%A3%E5%8E%8B%E5%90%8E%E7%9A%84%E6%96%87%E4%BB%B6-1608621650571.png" alt="image-20201122170613953"></p>
</li>
<li><p>启动和关闭Tomcat<br><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/tomcat%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD-1608621650571.png" alt="tomcat启动和关闭"></p>
</li>
<li><p>访问测试: </p>
</li>
</ol>
<h4 id="1-3-配置"><a href="#1-3-配置" class="headerlink" title="1.3 配置"></a>1.3 配置</h4><p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/tomcat%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.png" alt="image-20201122175818558"></p>
<ul>
<li><p>可以配置启动的端口号</p>
<ul>
<li><p>tomcat的默认端口号为: 8080</p>
</li>
<li><p>mysql: 3306</p>
</li>
<li><p>http: 80</p>
</li>
<li><p>https: 443</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">Connector</span> <span class="hljs-attr">port</span>=<span class="hljs-string">&quot;8080&quot;</span> <span class="hljs-attr">protocol</span>=<span class="hljs-string">&quot;HTTP/1.1&quot;</span></span>
<span class="hljs-tag">           <span class="hljs-attr">connectionTimeout</span>=<span class="hljs-string">&quot;20000&quot;</span></span>
<span class="hljs-tag">           <span class="hljs-attr">redirectPort</span>=<span class="hljs-string">&quot;8443&quot;</span> /&gt;</span></code></pre></div>
</li>
</ul>
</li>
<li><p>可以配置主机的名称</p>
<ul>
<li>默认的主机名为: localhost - &gt; 127.0.0.1</li>
<li>默认的网站应用存放的位置: webapps</li>
</ul>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">Host</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;localhost&quot;</span>  <span class="hljs-attr">appBase</span>=<span class="hljs-string">&quot;webapps&quot;</span></span>
<span class="hljs-tag">      <span class="hljs-attr">unpackWARs</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">autoDeploy</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span></code></pre></div>
</li>
<li><p>可以配置一下环境变量</p>
<h5 id="题外话-网站是如何进行访问的"><a href="#题外话-网站是如何进行访问的" class="headerlink" title="题外话: 网站是如何进行访问的"></a>题外话: 网站是如何进行访问的</h5><ol>
<li><p>输入一个域名; 回车</p>
</li>
<li><p>检查本机的 C:\Windows\System32\drivers\etc\hosts配置文件下有没有这个域名映射;</p>
<ol>
<li>有: 直接返回对应的ip地址,这个地址中,有我们需要访问的web程序,可以直接访问 127.0.0.1    <a target="_blank" rel="noopener" href="http://www.baidu.com">www.baidu.com</a></li>
<li>没有: 去DNS服务器找,找到的话就返回,找不到就返回找不到<br><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-%E8%AE%BF%E9%97%AE%E7%BD%91%E7%AB%99%E7%9A%84%E8%BF%87%E7%A8%8B.png" alt="image-20201123000028908"></li>
</ol>
</li>
</ol>
</li>
</ul>
<h4 id="1-4-发布一个Web网站"><a href="#1-4-发布一个Web网站" class="headerlink" title="1.4 发布一个Web网站"></a>1.4 发布一个Web网站</h4><p>将自己写发网站,放到服务器(Tomcat)中指定的web应用的文件夹(webapps)下,就可以访问网站应该有的结构</p>
<div class="code-wrapper"><pre><code class="hljs haml">-<span class="ruby">--webapps : Tomcat服务器的web目录</span>
<span class="ruby">	-ROOT</span>
<span class="ruby">	-Study</span>
<span class="ruby">	-WEB-INF</span>
<span class="ruby">			-<span class="hljs-symbol">Classes:</span> java程序</span>
<span class="ruby">			-<span class="hljs-symbol">lib:</span> web应用所依赖的jar包</span>
<span class="ruby">		-index.html 默认的首页</span>
<span class="ruby">		-static</span>
<span class="ruby">			-css</span>
<span class="ruby">				-style.css</span>
<span class="ruby">			-js</span>
<span class="ruby">			-img</span>
<span class="ruby">		-...</span></code></pre></div>

<p>HTTP协议: 面试</p>
<p>Maven: 构建工具</p>
<ul>
<li><p>Maven安装包</p>
<p>Servlet 入门</p>
</li>
<li><p>HelloWorld!</p>
</li>
<li><p>Servlet配置</p>
</li>
<li><p>原理</p>
</li>
</ul>
<h2 id="2-HTTP"><a href="#2-HTTP" class="headerlink" title="2, HTTP"></a>2, HTTP</h2><p> <strong>JavaWeb第2天</strong></p>
<p><strong>date: 2020.11.24</strong></p>
<h3 id="2-1-是什么http"><a href="#2-1-是什么http" class="headerlink" title="2.1 是什么http"></a>2.1 是什么http</h3><p>HTTP(超文本传输协议)是一个简单的请求-响应协议，它通常运行在TCP之上</p>
<ul>
<li>文本: html, 字符串 …</li>
<li>超文本: 图片, 音乐, 视频, 定位, 地图 …</li>
</ul>
<p>Https:　安全的</p>
<ul>
<li>443</li>
</ul>
<h3 id="2-2-两个时代"><a href="#2-2-两个时代" class="headerlink" title="2.2 两个时代"></a>2.2 两个时代</h3><ul>
<li>http1.0<ul>
<li>HTTP/1.0: 客户端与web服务器连接后,只能获取一个web资源,断开连接</li>
</ul>
</li>
<li>http2.0<ul>
<li>HTTP/1.1: 客户端与web服务器连接后, 可以获取多个web资源</li>
</ul>
</li>
</ul>
<h3 id="2-3-Http请求"><a href="#2-3-Http请求" class="headerlink" title="2.3 Http请求"></a>2.3 Http请求</h3><ul>
<li>客户端—发请求(Request)— 服务器</li>
<li></li>
</ul>
<p>百度:</p>
<div class="code-wrapper"><pre><code class="hljs oxygene">Request URL: https:<span class="hljs-comment">//www.baidu.com	请求地址</span>
Request <span class="hljs-function"><span class="hljs-keyword">Method</span>:</span> GET		get方法/post方法
Status Code: <span class="hljs-number">200</span> OK		状态码: <span class="hljs-number">200</span>
Remote Address: <span class="hljs-number">14.215</span>.<span class="hljs-number">177.38</span>:<span class="hljs-number">443</span>	远程地址</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs makefile"><span class="hljs-section">Accept: text/html</span>
<span class="hljs-section">Accept-Encoding: gzip, deflate, br</span>
<span class="hljs-section">Accept-Language: zh-CN,zh;q=0.9</span>
<span class="hljs-section">Cache-Control:max-age=0</span>
<span class="hljs-section">Connection: keep-alive</span></code></pre></div>

<h4 id="1-请求行"><a href="#1-请求行" class="headerlink" title="1, 请求行"></a>1, 请求行</h4><ul>
<li>请求行的请求方式: GET</li>
<li>请求方式: <strong>GET</strong>, <strong>POST</strong>, HEAD, DELETE, TRACT <ul>
<li>get: 请求能够携带的参数比较少,大小有限制,会在浏览器的URL地址栏显示数据内容,不安全,但高效</li>
<li>post: 请求能够携带的参数没有限制,大小没有限制,不会在浏览器的URL地址栏显示数据内容,安全,但不高效</li>
</ul>
</li>
</ul>
<h4 id="2-消息头"><a href="#2-消息头" class="headerlink" title="2, 消息头"></a>2, 消息头</h4><div class="code-wrapper"><pre><code class="hljs ldif"><span class="hljs-attribute">Accept</span>: 告诉浏览器,它所支持的数据类型
<span class="hljs-attribute">Accept-Encoding</span>: 支持哪种编码格式 GBK UTF-8 GB2312 ISO8859-1
<span class="hljs-attribute">Accept-Language</span>: 告诉浏览器,它的语言环境
<span class="hljs-attribute">Cache-Control:max-age=0</span>: 缓存控制
<span class="hljs-attribute">Connection</span>: 告诉浏览器,请求完成是断开还是保持连接
<span class="hljs-attribute">Host</span>: 主机</code></pre></div>

<h3 id="2-4-http响应"><a href="#2-4-http响应" class="headerlink" title="2.4 http响应"></a>2.4 http响应</h3><ul>
<li>服务器—响应— 客户端</li>
</ul>
<p>百度: </p>
<div class="code-wrapper"><pre><code class="hljs makefile"><span class="hljs-section">Cache-Control: private	缓存控制</span>
<span class="hljs-section">Connection: keep-alive	连接</span>
<span class="hljs-section">Content-Encoding: gzip	编码类型</span>
<span class="hljs-section">Content-Type:text/html	类型</span></code></pre></div>

<h4 id="1-响应体"><a href="#1-响应体" class="headerlink" title="1, 响应体"></a>1, 响应体</h4><div class="code-wrapper"><pre><code class="hljs ldif"><span class="hljs-attribute">Accept</span>: 告诉浏览器,它所支持的数据类型
<span class="hljs-attribute">Accept-Encoding</span>: 支持哪种编码格式 GBK UTF-8 GB2312 ISO8859-1
<span class="hljs-attribute">Accept-Language</span>: 告诉浏览器,它的语言环境
<span class="hljs-attribute">Cache-Control:max-age=0</span>: 缓存控制
<span class="hljs-attribute">Connection</span>: 告诉浏览器,请求完成是断开还是保持连接
<span class="hljs-attribute">Host</span>: 主机
<span class="hljs-attribute">Refrush</span>: 告诉客户端,多久刷新一次
<span class="hljs-attribute">Location</span>: 让网页重新定位</code></pre></div>

<h4 id="2-响应状态码"><a href="#2-响应状态码" class="headerlink" title="2, 响应状态码"></a>2, 响应状态码</h4><p>200: 请求响应成功 200</p>
<p>3**: 请求重定向</p>
<ul>
<li>重定向: 你重新到我给你的新位置去</li>
</ul>
<p>4xx: 找不到资源 404</p>
<ul>
<li>资源不存在</li>
</ul>
<p>5xx: 服务器代码错 500 502: 网关错误</p>
<p><strong>常见面试题</strong></p>
<p>当你的浏览器中地址栏输入并回车的一瞬间到页面能够展示回来,经历了什么?</p>
<h2 id="3-Maven"><a href="#3-Maven" class="headerlink" title="3, Maven"></a>3, Maven</h2><p> <strong>JavaWeb第3天</strong></p>
<p><strong>date: 2020.11.26</strong></p>
<p><strong>我为什么要学习这个技术</strong></p>
<ol>
<li>在Java web开发中,需要使用大量的jar包,我们手动去导入;</li>
<li>如何能够让一个东西自动帮我导入和配置这个jar包.<br>由此,Maven诞生了</li>
</ol>
<h3 id="3-1-Maven项目架构管理工具"><a href="#3-1-Maven项目架构管理工具" class="headerlink" title="3.1 Maven项目架构管理工具"></a>3.1 Maven项目架构管理工具</h3><p>我们目前用来就是方便的导入jar包!</p>
<p>Maven的核心思想: <strong>约定大于配置</strong></p>
<ul>
<li>有约束,不要去违反</li>
</ul>
<p>Maven会规定好你如何去编写我们的Java代码,必须要按照这个规范;</p>
<h3 id="3-2-下载安装Maven"><a href="#3-2-下载安装Maven" class="headerlink" title="3.2 下载安装Maven"></a>3.2 下载安装Maven</h3><p>官网: <a target="_blank" rel="noopener" href="https://maven.apache.org/">Maven – Welcome to Apache Maven</a></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/Maven%E4%B8%8B%E8%BD%BD.png" alt="image-20201126124710642"></p>
<p>下载完成后,解压即可</p>
<p>电脑上的环境,最后都放在一个文件夹里</p>
<h3 id="3-3-配置环境变量"><a href="#3-3-配置环境变量" class="headerlink" title="3.3 配置环境变量"></a>3.3 配置环境变量</h3><p>在我们的系统环境变量中</p>
<p>配置如下配置:</p>
<ul>
<li>M2_HOME     maven目录下的bin目录</li>
<li>MAVEN_HOME  maven目录</li>
</ul>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/maven%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE.png" alt="image-20201126125928904"></p>
<p>测试Maven是否安装成功,保证必须配置完毕!</p>
<h3 id="3-4-阿里云镜像"><a href="#3-4-阿里云镜像" class="headerlink" title="3.4 阿里云镜像"></a>3.4 阿里云镜像</h3><ul>
<li>镜像: mirrors<ul>
<li>作用: 加速我们的下载</li>
</ul>
</li>
<li>国内建议使用阿里云的镜像</li>
</ul>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>*,!jeecg,!jeecg-snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Nexus aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                                			<span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span></code></pre></div>

<h3 id="3-5-本地仓库"><a href="#3-5-本地仓库" class="headerlink" title="3.5 本地仓库"></a>3.5 本地仓库</h3><p>在本地的仓库,运程仓库;</p>
<p>建立一个本地仓库: localRepository</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">localRepository</span>&gt;</span>D:\PNCA\environment\apache-maven-3.6.3\maven_repo<span class="hljs-tag">&lt;/<span class="hljs-name">localRepository</span>&gt;</span></code></pre></div>

<h3 id="3-6-在IDEA中使用Maven"><a href="#3-6-在IDEA中使用Maven" class="headerlink" title="3.6 在IDEA中使用Maven"></a>3.6 在IDEA中使用Maven</h3><p> <strong>JavaWeb第4天</strong></p>
<p><strong>date: 2020.11.27</strong></p>
<ol>
<li>启动IDEA</li>
<li>创建一个Maven项目<br><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAMavenWeb%E9%A1%B9%E7%9B%AE.png" alt="image-20201127145100090"></li>
</ol>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201127145306228.png" alt="image-20201127145306228"></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201127145626430.png" alt="image-20201127145626430"></p>
<ol start="3">
<li><p>等待项目初始化完毕</p>
</li>
<li><p>观察Maven仓库多了什么东西?</p>
</li>
<li><p>IDEA中Maven设置<br>注意: IDEA项目创建成功后,看一眼Maven的配置,</p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/IDEA%E4%B8%ADMaven%E9%85%8D%E7%BD%AE.png" alt="image-20201127170603154"></p>
</li>
<li><p>到这里,Maven在IDEA中的配置和使用就OK了!</p>
</li>
</ol>
<h3 id="3-7-创建一个普通的Maven项目"><a href="#3-7-创建一个普通的Maven项目" class="headerlink" title="3.7 创建一个普通的Maven项目"></a>3.7 创建一个普通的Maven项目</h3><p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/%E6%99%AE%E9%80%9A%E7%9A%84Maven%E7%9B%AE%E5%BD%95.png" alt="image-20201127175143915"></p>
<p>这个只有在Web应用下才有1</p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/Web%E9%85%8D%E7%BD%AE.png" alt="image-20201127175510963"></p>
<h3 id="3-8-标记文件夹功能"><a href="#3-8-标记文件夹功能" class="headerlink" title="3.8 标记文件夹功能"></a>3.8 标记文件夹功能</h3><p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201127175908458.png" alt="image-20201127175908458"></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/%E6%A0%87%E8%AE%B0%E6%96%87%E4%BB%B6%E5%A4%B9%E5%8A%9F%E8%83%BD.png" alt="image-20201127180238889"></p>
<h3 id="3-9-在IDEA中配置Tomcat"><a href="#3-9-在IDEA中配置Tomcat" class="headerlink" title="3.9 在IDEA中配置Tomcat"></a>3.9 在IDEA中配置Tomcat</h3><p> <strong>JavaWeb第5天</strong></p>
<p><strong>date: 2020.11.29</strong></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201127180621196.png" alt="image-20201127180621196"></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201127180711490.png" alt="image-20201127180711490"></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201127181610015.png" alt="image-20201127181610015"></p>
<p>解决警告问题<br>必须要配置: <strong>为什么会有这个问题: 我们访问一个网站,需要指定一个文件夹名字;</strong></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201127181728157.png" alt="image-20201127181728157"></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201127182350573.png" alt="image-20201127182350573"></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201127182613164.png" alt="image-20201127182613164"></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201127235920783.png" alt="image-20201127235920783"></p>
<h3 id="3-10-pom文件"><a href="#3-10-pom文件" class="headerlink" title="3.10 pom文件"></a>3.10 pom文件</h3><p>pom.xml是Maven的核心配置文件</p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/Maven%E7%9A%84pom%E6%96%87%E4%BB%B6.png" alt="image-20201128210845128"></p>
<p>由于在IDEA的Maven项目中新建一个模块,它的Language Level总是自动变到5,所以可以在pom.xml加入下面的</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.8.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
<span class="hljs-comment">&lt;!--                    下面的source和target的版本要跟自己的jdk版本一样--&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>14<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>14<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--项目构建用的东西--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">finalName</span>&gt;</span>javaWeb_01_Maven<span class="hljs-tag">&lt;/<span class="hljs-name">finalName</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">pluginManagement</span>&gt;</span><span class="hljs-comment">&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-clean-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-resources-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.8.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.22.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-war-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-install-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.8.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.8.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
          <span class="hljs-comment">&lt;!--下面的source和target的版本要跟自己的jdk版本一样--&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">pluginManagement</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span></code></pre></div>

<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/Maven%E7%9A%84%E4%BE%9D%E8%B5%96.png" alt="image-20201128220121858"></p>
<p>maven由于他的约定大于配置,我们之后可能遇到我们写的配置文件,无法被导出或者生效的问题,解决方案:</p>
<div class="code-wrapper"><pre><code class="hljs xml">    <span class="hljs-comment">&lt;!--在build中配置resources,来防止我们资源导出失败的问题--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span></code></pre></div>

<h3 id="3-12-IDEA操作"><a href="#3-12-IDEA操作" class="headerlink" title="3.12 IDEA操作"></a>3.12 IDEA操作</h3><p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/maven%E7%9A%84%E4%BE%9D%E8%B5%96%E6%A0%91.png" alt="image-20201129132913845"></p>
<h3 id="3-13-解决遇到的问题"><a href="#3-13-解决遇到的问题" class="headerlink" title="3.13 解决遇到的问题"></a>3.13 解决遇到的问题</h3><p> <strong>JavaWeb第6天</strong></p>
<p><strong>date: 2020.12.1</strong></p>
<ol>
<li><p>Maven 3.6.2 不能导包</p>
</li>
<li><p>Tomcat闪退</p>
</li>
<li><p>IDEA中每次都要重复Maven</p>
<ul>
<li><p>在IDEA中全局默认配置中去配置</p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201201163402800.png" alt="image-20201201163402800"></p>
</li>
</ul>
</li>
<li><p>Maven项目中Tomcat无法配置</p>
</li>
<li><p>Maven项目Web项目中的web.xml版本问题<br><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201201164251107.png" alt="image-20201201164251107"></p>
</li>
<li><p>替换为webapps4.0版本和tomcat一致</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span>
<span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee</span></span>
<span class="hljs-tag"><span class="hljs-string">                      http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span>
<span class="hljs-tag">         <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span></span>
<span class="hljs-tag">         <span class="hljs-attr">metadata-complete</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span></code></pre></div>



</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://mvnrepository.com/search?q=servlet+api">Maven Repository: servlet api (mvnrepository.com)</a></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201201170540169.png" alt="image-20201201170540169"></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201201170637660.png" alt="image-20201201170637660"></p>
<h2 id="4-Servlet"><a href="#4-Servlet" class="headerlink" title="4, Servlet"></a>4, Servlet</h2><h3 id="4-1-Servlet简介"><a href="#4-1-Servlet简介" class="headerlink" title="4.1, Servlet简介"></a>4.1, Servlet简介</h3><ul>
<li>Servlet就是Sun公司开发动态web的一种技术</li>
<li>Sun在这些API中提供了一个接口叫做: Servlet, 如果你想开发一个Servlet程序,只需要完成两个小步骤:<ul>
<li>编一个类, 实现Servlet接口</li>
<li>把开发好的Java类部署到web服务器中.</li>
</ul>
</li>
</ul>
<p><strong>把实现了Servlet接口的java程序叫做,Servlet</strong></p>
<h3 id="4-2-HelloServlet"><a href="#4-2-HelloServlet" class="headerlink" title="4.2 HelloServlet"></a>4.2 HelloServlet</h3><p>Servlet接口Sun公司有两个默认的实现类: HttpServlet</p>
<ol>
<li><p>构建一个普通的Maven项目,删掉里面的src目录,以后我们的学习就在这个项目里面建立Moudel;这个空工程就是Maven的主工程</p>
</li>
<li><p>关于Maven父子工程的理解;<br>父母项目会有</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>servlet_01<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span></code></pre></div>

<p>子项目会有</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javaWeb_02_servlet<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.pnca<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span></code></pre></div>

<p>父项目中的java子项目可以直接使用</p>
</li>
<li><p>Maven环境优化</p>
<ol>
<li>修改web.xml为最新的</li>
<li>将maven的结构搭建完整</li>
</ol>
</li>
<li><p>编写一个Servlet程序</p>
<ol>
<li><p>编写一个普通类</p>
</li>
<li><p>实现Servlet接口,这里我们直接继承HttpServlet</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;

   <span class="hljs-comment">// 由于get和post只是请求实现的不同方式,可以互相调用,业务逻辑都一样</span>
   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
      PrintWriter writer = resp.getWriter();
      writer.print(<span class="hljs-string">&quot;Hello,Servlet&quot;</span>);
      <span class="hljs-keyword">super</span>.doGet(req, resp);
   &#125;

   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
      <span class="hljs-keyword">super</span>.doPost(req, resp);
   &#125;
&#125;</code></pre></div>
</li>
</ol>
</li>
<li><p>编写Servlet的映射<br>为什么需要映射: 我们写的是Java程序,但是要通过浏览器访问,而浏览器需要连接web服务器,所以我们需要在web服务器中注册我们的Servlet,还需要给他一个浏览器能够访问的路径</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--注册Servlet--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.pnca.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span>
<span class="hljs-comment">&lt;!--Servlet的请求路径--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
    <span class="hljs-comment">&lt;!--url-pattern要加/--&gt;</span>--&gt;
   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span></code></pre></div>
</li>
<li><p>配置tomcat<br>注意: 配置项目发布的路径,以及删除父类构造函数</p>
</li>
<li><p>启动测试</p>
</li>
</ol>
<h3 id="4-3-Servlet原理"><a href="#4-3-Servlet原理" class="headerlink" title="4.3, Servlet原理"></a>4.3, Servlet原理</h3><p> <strong>JavaWeb第7天</strong></p>
<p><strong>date: 2020.12.4</strong></p>
<p>Servlet是由Web服务器调用,web服务器在收到浏览器请求之后,会:</p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201204151036212.png" alt="image-20201204151036212"></p>
<h3 id="4-4-Mapping问题"><a href="#4-4-Mapping问题" class="headerlink" title="4.4, Mapping问题"></a>4.4, Mapping问题</h3><ol>
<li><p>一个Servlet可以指定一个映射路径</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span></code></pre></div>
</li>
<li><p>一个Servlet可以指定多个映射路径</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello2<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello3<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span></code></pre></div>
</li>
<li><p>一个Servlet可以指定通用映射路径</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span></code></pre></div>
</li>
<li><p>默认请求路径</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span></code></pre></div>
</li>
<li><p>指定一些后缀或者前缀…</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--可以自定义后缀实现请求映射</span>
<span class="hljs-comment">注意点,*前面并不能加项目映射的路径</span>
<span class="hljs-comment">hello/saifsf.pnca--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>*.pnca<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span></code></pre></div>
</li>
<li><p>优先级<br>指定了固有的映射路径优先级最高,如果找不到就会走默认的处理请求;</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--404--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>error<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.pnca.servlet.ErrorServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>error<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span></code></pre></div>

</li>
</ol>
<h3 id="4-5-ServletContext"><a href="#4-5-ServletContext" class="headerlink" title="4.5, ServletContext"></a>4.5, ServletContext</h3><p> <strong>JavaWeb第8天</strong></p>
<p><strong>date: 2020.12.6</strong></p>
<p>web容器在启动的时候,它会为每个web程序都创建一个对应的Servlet对象,他代表了当前的web应用;</p>
<h4 id="1-共享数据"><a href="#1-共享数据" class="headerlink" title="1. 共享数据"></a>1. 共享数据</h4><p>我在这个Servlet中保存的数据,可以在另外一个Servlet中拿到;</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HelloServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span></span>&#123;
	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
		System.out.println(<span class="hljs-string">&quot;Hello&quot;</span>);
<span class="hljs-comment">//		this.getInitParameter() // 初始化参数</span>
<span class="hljs-comment">//		this.getServletConfig() // Servlet配置</span>
<span class="hljs-comment">//		this.getServletContext() // Servlet上下文</span>
		ServletContext servletContext = <span class="hljs-keyword">this</span>.getServletContext();
		String username = <span class="hljs-string">&quot;pncalbl&quot;</span>;    <span class="hljs-comment">// 数据</span>
		servletContext.setAttribute(<span class="hljs-string">&quot;username&quot;</span>, username); <span class="hljs-comment">//将一个数据保存ServletContext中,名字为username</span>
	&#125;
&#125;</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GetServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;
   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
      doGet(req, resp);
   &#125;

   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
      ServletContext servletContext = <span class="hljs-keyword">this</span>.getServletContext();
      String username = (String)servletContext.getAttribute(<span class="hljs-string">&quot;username&quot;</span>);
      resp.setContentType(<span class="hljs-string">&quot;text/html&quot;</span>);
      resp.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);
      resp.getWriter().print(<span class="hljs-string">&quot;名字&quot;</span> + username);
   &#125;
&#125;</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>getc<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.pnca.servlet.GetServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>getc<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/getc<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span></code></pre></div>

<ul>
<li><p>测试访问结果;</p>
<p><strong>注意,先执行/hello,存入数据.然后执行/getc,获取数据</strong></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201205173037189.png" alt="image-20201205173037189"></p>
</li>
</ul>
<h4 id="2-获取初始化参数"><a href="#2-获取初始化参数" class="headerlink" title="2, 获取初始化参数"></a>2, 获取初始化参数</h4><div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--配置一些web应用初始化参数--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">context-param</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>url<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">context-param</span>&gt;</span></code></pre></div>

<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
   ServletContext servletContext = <span class="hljs-keyword">this</span>.getServletContext();

   String url = servletContext.getInitParameter(<span class="hljs-string">&quot;url&quot;</span>);
   resp.getWriter().print(url);
&#125;</code></pre></div>

<h4 id="3-请求转发"><a href="#3-请求转发" class="headerlink" title="3, 请求转发"></a>3, 请求转发</h4><div class="code-wrapper"><pre><code class="hljs java">    <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
      System.out.println(<span class="hljs-string">&quot;进入了方法ServletDemo04&quot;</span>);
      ServletContext servletContext = <span class="hljs-keyword">this</span>.getServletContext();
<span class="hljs-comment">//    RequestDispatcher requestDispatcher = servletContext.getRequestDispatcher(&quot;/gp&quot;);   // 转发的请求路径</span>
<span class="hljs-comment">//    requestDispatcher.forward(req, resp);   // 调用forward方法实现请求转发</span>
      servletContext.getRequestDispatcher(<span class="hljs-string">&quot;/gp&quot;</span>).forward(req, resp);
   &#125;</code></pre></div>

<h4 id="4-读取资源文件"><a href="#4-读取资源文件" class="headerlink" title="4, 读取资源文件"></a>4, 读取资源文件</h4><p>properties</p>
<ul>
<li>在java目录下新建properties</li>
<li>在resource目录下新建properties</li>
</ul>
<p>发现: 都被打包到同一个路径下: classes,我们俗称这个路径为classespath</p>
<p>思路: 需要一个文件流</p>
<div class="code-wrapper"><pre><code class="hljs properties"><span class="hljs-attr">username</span>=<span class="hljs-string">root566</span>
<span class="hljs-attr">password</span>=<span class="hljs-string">123456thhh</span></code></pre></div>

<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
      ServletContext servletContext = <span class="hljs-keyword">this</span>.getServletContext();
<span class="hljs-comment">//    InputStream resourceAsStream = servletContext.getResourceAsStream(&quot;/WEB-INF/classes/db.properties&quot;);</span>
      InputStream resourceAsStream = servletContext.getResourceAsStream(<span class="hljs-string">&quot;/WEB-INF/classes/com/pnca/servlet/aa.properties&quot;</span>);
      Properties properties = <span class="hljs-keyword">new</span> Properties();
      properties.load(resourceAsStream);
      String user = properties.getProperty(<span class="hljs-string">&quot;username&quot;</span>);
      String pwd = properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);
      resp.getWriter().print(user + <span class="hljs-string">&quot;: &quot;</span> + pwd);
   &#125;</code></pre></div>

<p>访问测试,即可</p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201206173710672.png" alt="image-20201206173710672"></p>
<h3 id="4-6-HttpServletResponce"><a href="#4-6-HttpServletResponce" class="headerlink" title="4.6, HttpServletResponce"></a>4.6, HttpServletResponce</h3><p> <strong>JavaWeb第9天</strong></p>
<p><strong>date: 2020.12.8</strong></p>
<p>web服务器接收到客户端的http请求时,针对这个请求,分别创建一个代表请求的HttpServletRequest对象,代表响应的一个HttpServletResponse对象;</p>
<ul>
<li>如果要获取客户端请求过来的参数: 找ServletRequest</li>
<li>如果要给客户端响应一些信息: 找HttpResponse</li>
</ul>
<h4 id="1-简单分类"><a href="#1-简单分类" class="headerlink" title="1, 简单分类"></a>1, 简单分类</h4><p>负责向浏览器发送数据的方法</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-function">ServletOutputStream <span class="hljs-title">getOutputStream</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException</span>;
<span class="hljs-function">PrintWriter <span class="hljs-title">getWriter</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException</span>;</code></pre></div>

<p>负责向浏览器发送响应头的方法</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setCharacterEncoding</span><span class="hljs-params">(String var1)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setContentLength</span><span class="hljs-params">(<span class="hljs-keyword">int</span> var1)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setContentLengthLong</span><span class="hljs-params">(<span class="hljs-keyword">long</span> var1)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setContentType</span><span class="hljs-params">(String var1)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setDateHeader</span><span class="hljs-params">(String var1, <span class="hljs-keyword">long</span> var2)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">addDateHeader</span><span class="hljs-params">(String var1, <span class="hljs-keyword">long</span> var2)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setHeader</span><span class="hljs-params">(String var1, String var2)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">addHeader</span><span class="hljs-params">(String var1, String var2)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setIntHeader</span><span class="hljs-params">(String var1, <span class="hljs-keyword">int</span> var2)</span></span>;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">addIntHeader</span><span class="hljs-params">(String var1, <span class="hljs-keyword">int</span> var2)</span></span>;
</code></pre></div>

<p>响应的状态码</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">int</span> SC_CONTINUE = <span class="hljs-number">100</span>;
<span class="hljs-keyword">int</span> SC_SWITCHING_PROTOCOLS = <span class="hljs-number">101</span>;
<span class="hljs-keyword">int</span> SC_OK = <span class="hljs-number">200</span>;
<span class="hljs-keyword">int</span> SC_CREATED = <span class="hljs-number">201</span>;
<span class="hljs-keyword">int</span> SC_ACCEPTED = <span class="hljs-number">202</span>;
<span class="hljs-keyword">int</span> SC_NON_AUTHORITATIVE_INFORMATION = <span class="hljs-number">203</span>;
<span class="hljs-keyword">int</span> SC_NO_CONTENT = <span class="hljs-number">204</span>;
<span class="hljs-keyword">int</span> SC_RESET_CONTENT = <span class="hljs-number">205</span>;
<span class="hljs-keyword">int</span> SC_PARTIAL_CONTENT = <span class="hljs-number">206</span>;
<span class="hljs-keyword">int</span> SC_MULTIPLE_CHOICES = <span class="hljs-number">300</span>;
<span class="hljs-keyword">int</span> SC_MOVED_PERMANENTLY = <span class="hljs-number">301</span>;
<span class="hljs-keyword">int</span> SC_MOVED_TEMPORARILY = <span class="hljs-number">302</span>;
<span class="hljs-keyword">int</span> SC_FOUND = <span class="hljs-number">302</span>;
<span class="hljs-keyword">int</span> SC_SEE_OTHER = <span class="hljs-number">303</span>;
<span class="hljs-keyword">int</span> SC_NOT_MODIFIED = <span class="hljs-number">304</span>;
<span class="hljs-keyword">int</span> SC_USE_PROXY = <span class="hljs-number">305</span>;
<span class="hljs-keyword">int</span> SC_TEMPORARY_REDIRECT = <span class="hljs-number">307</span>;
<span class="hljs-keyword">int</span> SC_BAD_REQUEST = <span class="hljs-number">400</span>;
<span class="hljs-keyword">int</span> SC_UNAUTHORIZED = <span class="hljs-number">401</span>;
<span class="hljs-keyword">int</span> SC_PAYMENT_REQUIRED = <span class="hljs-number">402</span>;
<span class="hljs-keyword">int</span> SC_FORBIDDEN = <span class="hljs-number">403</span>;
<span class="hljs-keyword">int</span> SC_NOT_FOUND = <span class="hljs-number">404</span>;
<span class="hljs-keyword">int</span> SC_METHOD_NOT_ALLOWED = <span class="hljs-number">405</span>;
<span class="hljs-keyword">int</span> SC_NOT_ACCEPTABLE = <span class="hljs-number">406</span>;
<span class="hljs-keyword">int</span> SC_PROXY_AUTHENTICATION_REQUIRED = <span class="hljs-number">407</span>;
<span class="hljs-keyword">int</span> SC_REQUEST_TIMEOUT = <span class="hljs-number">408</span>;
<span class="hljs-keyword">int</span> SC_CONFLICT = <span class="hljs-number">409</span>;
<span class="hljs-keyword">int</span> SC_GONE = <span class="hljs-number">410</span>;
<span class="hljs-keyword">int</span> SC_LENGTH_REQUIRED = <span class="hljs-number">411</span>;
<span class="hljs-keyword">int</span> SC_PRECONDITION_FAILED = <span class="hljs-number">412</span>;
<span class="hljs-keyword">int</span> SC_REQUEST_ENTITY_TOO_LARGE = <span class="hljs-number">413</span>;
<span class="hljs-keyword">int</span> SC_REQUEST_URI_TOO_LONG = <span class="hljs-number">414</span>;
<span class="hljs-keyword">int</span> SC_UNSUPPORTED_MEDIA_TYPE = <span class="hljs-number">415</span>;
<span class="hljs-keyword">int</span> SC_REQUESTED_RANGE_NOT_SATISFIABLE = <span class="hljs-number">416</span>;
<span class="hljs-keyword">int</span> SC_EXPECTATION_FAILED = <span class="hljs-number">417</span>;
<span class="hljs-keyword">int</span> SC_INTERNAL_SERVER_ERROR = <span class="hljs-number">500</span>;
<span class="hljs-keyword">int</span> SC_NOT_IMPLEMENTED = <span class="hljs-number">501</span>;
<span class="hljs-keyword">int</span> SC_BAD_GATEWAY = <span class="hljs-number">502</span>;
<span class="hljs-keyword">int</span> SC_SERVICE_UNAVAILABLE = <span class="hljs-number">503</span>;
<span class="hljs-keyword">int</span> SC_GATEWAY_TIMEOUT = <span class="hljs-number">504</span>;
<span class="hljs-keyword">int</span> SC_HTTP_VERSION_NOT_SUPPORTED = <span class="hljs-number">505</span>;</code></pre></div>

<h4 id="2-下载文件"><a href="#2-下载文件" class="headerlink" title="2, 下载文件"></a>2, 下载文件</h4><p>1.向浏览器输出消息</p>
<p>2.下载文件</p>
<div class="code-wrapper"><pre><code>1.要获取下载文件的路径
2.下载的文件名
3.设置想办法让浏览器能够支持下载我们需要的东西
4.获取下载文件的输入流
5.创建缓冲区
6.获取OutPutStream对象
7.将FileOutPutStream流写入到Buffer缓冲区,使用OutPutStream将缓冲区中的数据输出到客户端
8.关闭流对象</code></pre></div><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
    <span class="hljs-comment">//1.  要获取下载文件的路径</span>
    String realPath = <span class="hljs-string">&quot;D:\\PNCA\\Project\\Java_Project\\JavaWeb\\javaweb_02_servlet\\response\\src\\main\\resources\\1.png&quot;</span>;
    <span class="hljs-comment">//    String realPath = this.getServletContext().getRealPath(&quot;/1.png&quot;);</span>
    System.out.println(<span class="hljs-string">&quot;获取下载文件的路径: &quot;</span> + realPath);
    <span class="hljs-comment">//2.  下载的文件名</span>
    String fileName = realPath.substring(realPath.lastIndexOf(<span class="hljs-string">&quot;\\&quot;</span>) + <span class="hljs-number">1</span>);
    <span class="hljs-comment">//3.  设置想办法让浏览器能够支持(Content-Disposition)下载我们需要的东西,中文文件名,设置utf-8编码</span>
    resp.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>, <span class="hljs-string">&quot;attachment; filename=&quot;</span> + URLEncoder.encode(fileName, StandardCharsets.UTF_8));
    <span class="hljs-comment">//4.  获取下载文件的输入流</span>
    FileInputStream in = <span class="hljs-keyword">new</span> FileInputStream(realPath);
    <span class="hljs-comment">//5.  创建缓冲区</span>
    <span class="hljs-keyword">int</span> len = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">1024</span>];
    <span class="hljs-comment">//6.  获取OutPutStream对象</span>
    ServletOutputStream out = resp.getOutputStream();
    <span class="hljs-comment">//7.  将FileOutPutStream流写入到Buffer缓冲区,使用OutPutStream将缓冲区中的数据输出到客户端</span>
    <span class="hljs-keyword">while</span> ((len = in.read(buffer)) &gt; <span class="hljs-number">0</span>) &#123;
        out.write(buffer, <span class="hljs-number">0</span>, len);
    &#125;
    <span class="hljs-comment">//8.  关闭流对象</span>
    in.close();
    out.close();
&#125;</code></pre></div>

<h4 id="3-验证码"><a href="#3-验证码" class="headerlink" title="3,  验证码"></a>3,  验证码</h4><div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImageServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;
   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
      <span class="hljs-comment">// 如何让浏览器3秒刷新一次</span>
      resp.setHeader(<span class="hljs-string">&quot;refresh&quot;</span> , <span class="hljs-string">&quot;3&quot;</span>);

      <span class="hljs-comment">// 在内存中创建一个图片</span>
      BufferedImage image = <span class="hljs-keyword">new</span> BufferedImage(<span class="hljs-number">80</span>, <span class="hljs-number">20</span>, BufferedImage.TYPE_INT_RGB);

      <span class="hljs-comment">// 得到图片</span>
      Graphics2D graphics = (Graphics2D) image.getGraphics();
      <span class="hljs-comment">// 设置图片的背景颜色</span>
      graphics.setColor(Color.white);
      graphics.fillRect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">80</span>, <span class="hljs-number">20</span>);
      <span class="hljs-comment">// 给图片写数据</span>
      graphics.setColor(Color.BLUE);
      graphics.setFont(<span class="hljs-keyword">new</span> Font(<span class="hljs-keyword">null</span>, Font.BOLD, <span class="hljs-number">20</span>));
      graphics.drawString(makeNum(), <span class="hljs-number">0</span>, <span class="hljs-number">20</span>);

      <span class="hljs-comment">// 告诉浏览器,这个请求用图片的方式打开</span>
      resp.setContentType(<span class="hljs-string">&quot;image/jpeg&quot;</span>);

      <span class="hljs-comment">// 网站存在缓存,不让浏览器缓存</span>
      resp.setDateHeader(<span class="hljs-string">&quot;expires&quot;</span>, -<span class="hljs-number">1</span>);
      resp.setHeader(<span class="hljs-string">&quot;Cache-Control&quot;</span>, <span class="hljs-string">&quot;no-cache&quot;</span>);
      resp.setHeader(<span class="hljs-string">&quot;Pragma&quot;</span>, <span class="hljs-string">&quot;no-cache&quot;</span>);

      <span class="hljs-comment">// 把图片写给浏览器</span>
      ImageIO.write(image, <span class="hljs-string">&quot;jpg&quot;</span>, resp.getOutputStream());
   &#125;

   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
      doGet(req, resp);
	&#125;

   <span class="hljs-comment">// 生成随机数</span>
   <span class="hljs-function"><span class="hljs-keyword">private</span> String <span class="hljs-title">makeNum</span><span class="hljs-params">()</span> </span>&#123;
      Random random = <span class="hljs-keyword">new</span> Random();
      String num = random.nextInt(<span class="hljs-number">999999</span>) + <span class="hljs-string">&quot;&quot;</span>;
      StringBuffer stringBuffer = <span class="hljs-keyword">new</span> StringBuffer();

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">7</span> - num.length(); i++) &#123; <span class="hljs-comment">// 保证七位数</span>
         stringBuffer.append(<span class="hljs-string">&quot;0&quot;</span>);
      &#125;
      <span class="hljs-keyword">return</span> stringBuffer.toString() + num;
   &#125;
&#125;</code></pre></div>

<p>注意,在web.xml中注册</p>
<h4 id="4-实现重定向"><a href="#4-实现重定向" class="headerlink" title="4, 实现重定向"></a>4, 实现重定向</h4><p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201211145312620.png" alt="image-20201211145312620"></p>
<p>B一个web资源收到客户端A的请求后,B会通知A客户端去访问另一个web资源,这个过程叫重定向</p>
<p>常见场景:</p>
<ul>
<li>用户登录</li>
</ul>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sendRedirect</span><span class="hljs-params">(String var1)</span> <span class="hljs-keyword">throws</span> IOException</span>;</code></pre></div>

<p>测试</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
   <span class="hljs-comment">/*resp.setHeader(&quot;Location&quot;, &quot;/rs/img&quot;);</span>
<span class="hljs-comment">   resp.setStatus(302);*/</span>
   resp.sendRedirect(<span class="hljs-string">&quot;/rs/img&quot;</span>);   <span class="hljs-comment">// 重定向</span>
&#125;</code></pre></div>

<p>面试题,请你聊聊重定向和转发的区别?</p>
<p>相同点</p>
<ul>
<li>页面都会实现跳转</li>
</ul>
<p>不同的</p>
<ul>
<li>请求转发的时候,url不会发生变化</li>
<li>重定向的时候,url地址栏会发生变化</li>
</ul>
<h3 id="4-7-HttpServletRequest"><a href="#4-7-HttpServletRequest" class="headerlink" title="4.7 , HttpServletRequest"></a>4.7 , HttpServletRequest</h3><p> <strong>JavaWeb第10天</strong></p>
<p><strong>date: 2020.12.12</strong></p>
<p>HttpServletRequest代表客户端的请求,用户通过http协议访问服务器,HTTP请求中的所有信息会被封装到HttpRequest,通过这个HttpRequest的方法,获得客户端的所有信息。</p>
<h4 id="1，-获取前端传递的参数"><a href="#1，-获取前端传递的参数" class="headerlink" title="1， 获取前端传递的参数"></a>1， 获取前端传递的参数</h4><p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201212150125276.png" alt="image-20201212150125276"></p>
<div class="code-wrapper"><pre><code class="hljs java">String username = req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);
		String password = req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);
		String[] hobbys = req.getParameterValues(<span class="hljs-string">&quot;hobbys&quot;</span>);
		System.out.println(<span class="hljs-string">&quot;==========================&quot;</span>);
		System.out.println(username);
		System.out.println(password);
		System.out.println(Arrays.toString(hobbys));
		System.out.println(<span class="hljs-string">&quot;==========================&quot;</span>);</code></pre></div>



<h4 id="2，-请求转发"><a href="#2，-请求转发" class="headerlink" title="2， 请求转发"></a>2， 请求转发</h4><div class="code-wrapper"><pre><code class="hljs java">req.getRequestDispatcher(<span class="hljs-string">&quot;/success.jsp&quot;</span>).forward(req, resp);
</code></pre></div>

<p>面试题,请你聊聊重定向和转发的区别?</p>
<p>相同点</p>
<ul>
<li>页面都会实现跳转</li>
</ul>
<p>不同的</p>
<ul>
<li>请求转发的时候,url不会发生变化 <strong>307</strong></li>
<li>重定向的时候,url地址栏会发生变化 <strong>302</strong></li>
</ul>
<h2 id="5-Cookie-Session（重点）"><a href="#5-Cookie-Session（重点）" class="headerlink" title="5, Cookie, Session（重点）"></a>5, Cookie, Session（重点）</h2><p> <strong>JavaWeb第11天</strong></p>
<p><strong>date: 2020.12.14</strong></p>
<h3 id="5-1-会话"><a href="#5-1-会话" class="headerlink" title="5.1, 会话"></a>5.1, 会话</h3><p><strong>会话</strong>: 用户打开一个浏览器,点击了很多的超链接,访问多个web资源,关闭浏览器,这个过程可以称之为会话.</p>
<p><strong>有状态会话</strong>: </p>
<p>一个网站,怎么证明你来过?</p>
<p>​    客户端                服务端</p>
<ol>
<li>服务端给客户端一个信件,客户端下次访问服务器带上信件就可以; cookie</li>
<li>服务器登记你来过了,下次你来的时候我来匹配你; session</li>
</ol>
<h3 id="5-2-保存会话的两种技术"><a href="#5-2-保存会话的两种技术" class="headerlink" title="5.2, 保存会话的两种技术"></a>5.2, 保存会话的两种技术</h3><p><strong>cookie</strong></p>
<ul>
<li>客户端技术(响应, 请求)</li>
</ul>
<p><strong>session</strong></p>
<ul>
<li>服务器技术,利用这个技术,可以保存会话的信息,我们可以把信息或者数据放在Session</li>
</ul>
<h3 id="5-3-Cookie"><a href="#5-3-Cookie" class="headerlink" title="5.3, Cookie"></a>5.3, Cookie</h3><ol>
<li>从请求中拿到cookie信息</li>
<li>服务器响应给客户端cookie</li>
</ol>
<div class="code-wrapper"><pre><code class="hljs java">Cookie[] cookies = req.getCookies();	<span class="hljs-comment">// 获得Cookie</span>
cookie.getName();	<span class="hljs-comment">// 获得cookie中的key</span>
cookie.getValue();	<span class="hljs-comment">// 获得cookie中的value</span>
<span class="hljs-keyword">new</span> Cookie(<span class="hljs-string">&quot;LastLoginTime&quot;</span>, System.currentTimeMillis() + <span class="hljs-string">&quot;&quot;</span>);	<span class="hljs-comment">// 新建一个cookie</span>
cookie.setMaxAge(<span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span>);	<span class="hljs-comment">// 设置cookie的有效期</span>
resp.addCookie(cookie);	<span class="hljs-comment">// 响应给客户端一个cookie</span></code></pre></div>

<p><strong>cookie: 一般会保存在本地的用户目录下 AppData中;</strong></p>
<p>一个网站Cookie是否存在上限;</p>
<ul>
<li>一个Cookie只能保存一个信息</li>
<li>一个web站点可以给浏览器发送多个cookie,最多存放20个cookie</li>
<li>Cookie大小有限制,例如4kb</li>
<li>游览器有300个cookie上限</li>
</ul>
<p>删除Cookie</p>
<ul>
<li>不设置有效期,关闭浏览器,自动失效</li>
<li>设置有效期时间为0</li>
</ul>
<p>编码, 解码</p>
<div class="code-wrapper"><pre><code class="hljs java">URLEncoder.encode(<span class="hljs-string">&quot;年后&quot;</span>, StandardCharsets.UTF_8)
URLDecoder.decode(cookie.getValue(), StandardCharsets.UTF_8)</code></pre></div>

<h3 id="5-4-Session-重点"><a href="#5-4-Session-重点" class="headerlink" title="5.4 Session (重点)"></a>5.4 Session (重点)</h3><p> <strong>JavaWeb第12天</strong></p>
<p><strong>date: 2020.12.15</strong></p>
<p>什么是Session:</p>
<ul>
<li><p>服务器会给每个用户(浏览器),创建一个Session对象</p>
</li>
<li><p>一个Session独占一个浏览器,只要浏览器没有关闭,这个Session就存在</p>
</li>
<li><p>用户登录之后,整个网站都可以访问.</p>
</li>
</ul>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201215212325644.png" alt="image-20201215212325644"></p>
<p>Session和Cookie的区别</p>
<ul>
<li>Cookie是把用户的数据写给用户的浏览器,浏览器保存(可以保存多个)</li>
<li>Session把用户的数据写到用户独占的Session中,服务器端保存(保存重要信息,减少服务器资源的浪费)</li>
<li>Session对象由服务器创建</li>
</ul>
<p>使用场景: </p>
<ul>
<li>保存一个用户的登录信息</li>
<li>购物车信息</li>
<li>在整个网站中,经常会使用的数据,我们将它保存在Sesson中</li>
</ul>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SessionDemo01</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;
	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;

		<span class="hljs-comment">// 解决乱码问题</span>
		req.setCharacterEncoding(<span class="hljs-string">&quot;utf-16&quot;</span>);
		resp.setCharacterEncoding(<span class="hljs-string">&quot;utf-16&quot;</span>);
		resp.setContentType(<span class="hljs-string">&quot;text/html;charset=utf-8&quot;</span>);

		<span class="hljs-comment">// 得到Session对象</span>
		HttpSession session = req.getSession();

		<span class="hljs-comment">// 给Session存东西</span>
		session.setAttribute(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-keyword">new</span> Person(<span class="hljs-string">&quot;PNCALBL&quot;</span>, <span class="hljs-number">10</span>));

		<span class="hljs-comment">// 获取Session的ID</span>
		String sessionId = session.getId();

		<span class="hljs-comment">// 判断Session是不是新创建</span>
		<span class="hljs-keyword">if</span> (session.isNew()) &#123;
			resp.getWriter().write(<span class="hljs-string">&quot;session创建成功,ID: &quot;</span> + sessionId);
		&#125;<span class="hljs-keyword">else</span>&#123;
			resp.getWriter().write(<span class="hljs-string">&quot;session已经在服务器中存在了,ID: &quot;</span> + sessionId);
		&#125;
	&#125;

	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
		doGet(req, resp);
	&#125;
&#125;
</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;

		<span class="hljs-comment">// 解决乱码问题</span>
		req.setCharacterEncoding(<span class="hljs-string">&quot;utf-16&quot;</span>);
		resp.setCharacterEncoding(<span class="hljs-string">&quot;utf-16&quot;</span>);
		resp.setContentType(<span class="hljs-string">&quot;text/html;charset=utf-8&quot;</span>);

		<span class="hljs-comment">// 得到Session对象</span>
		HttpSession session = req.getSession();

		Person person = (Person) session.getAttribute(<span class="hljs-string">&quot;name&quot;</span>);

		System.out.println(person);
	&#125;</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;

		<span class="hljs-comment">// 解决乱码问题</span>
		req.setCharacterEncoding(<span class="hljs-string">&quot;utf-16&quot;</span>);
		resp.setCharacterEncoding(<span class="hljs-string">&quot;utf-16&quot;</span>);
		resp.setContentType(<span class="hljs-string">&quot;text/html;charset=utf-8&quot;</span>);

		<span class="hljs-comment">// 得到Session对象</span>
		HttpSession session = req.getSession();
		session.removeAttribute(<span class="hljs-string">&quot;name&quot;</span>);
		session.invalidate();
	&#125;</code></pre></div>

<p>会话自动过期: web.xml配置</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--设置Session默认失效时间--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">session-config</span>&gt;</span>
    <span class="hljs-comment">&lt;!--1分钟后session失效,以分钟为单位--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-timeout</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">session-timeout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">session-config</span>&gt;</span></code></pre></div>

<h2 id="6-JSP"><a href="#6-JSP" class="headerlink" title="6, JSP"></a>6, JSP</h2><p> <strong>JavaWeb第13天</strong></p>
<p><strong>date: 2020.12.17</strong></p>
<h3 id="6-1-什么是jsp"><a href="#6-1-什么是jsp" class="headerlink" title="6.1, 什么是jsp"></a>6.1, 什么是jsp</h3><p>Java Server Pages : Java服务器端页面,也和Servlet一样,用于动态web技术!</p>
<p>最大的特点: </p>
<ul>
<li>写JSP就像在写HTML</li>
<li>区别:<ul>
<li>HTML只给用户提供数据</li>
<li>jsp页面可以嵌入Java代码, 为用户提供动态数据</li>
</ul>
</li>
</ul>
<h3 id="6-2-JSP原理"><a href="#6-2-JSP原理" class="headerlink" title="6.2, JSP原理"></a>6.2, JSP原理</h3><p>思路: JSP到底怎么执行的!</p>
<ul>
<li><p>代码层面没有任何问题</p>
</li>
<li><p>服务器内部工作</p>
<p>tomcat中有一个work目录</p>
<p>IDEA中使用Tomcat的话,会在IDEA的Tomcat中产生一个work目录</p>
</li>
</ul>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201217202017270.png" alt="image-20201217202017270"></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20201217202109882.png" alt="image-20201217202109882"></p>
<p>发现了java程序!</p>
<p><strong>浏览器向服务器发送请求,不管访问什么,其实都是在访问Servlet!</strong></p>
<p>JSP最终也会被转换成一个java类</p>
<p>JSP本质上还是一个Servlet</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// 初始化</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">_jspInit</span><span class="hljs-params">()</span> </span>&#123;
&#125;
<span class="hljs-comment">// 销毁</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">_jspDestroy</span><span class="hljs-params">()</span> </span>&#123;
&#125;
<span class="hljs-comment">// JSPService</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">_jspService</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span></span>&#123;&#125;</code></pre></div>

<ol>
<li><p>判断请求</p>
</li>
<li><p>内置了一些对象</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">final</span> javax.servlet.jsp.PageContext pageContext; <span class="hljs-comment">// 页面上下文</span>
javax.servlet.http.HttpSession session = <span class="hljs-keyword">null</span>; <span class="hljs-comment">// session</span>
<span class="hljs-keyword">final</span> javax.servlet.ServletContext application; <span class="hljs-comment">// applicationContext</span>
<span class="hljs-keyword">final</span> javax.servlet.ServletConfig config; <span class="hljs-comment">// config</span>
javax.servlet.jsp.JspWriter out = <span class="hljs-keyword">null</span>; <span class="hljs-comment">// out</span>
<span class="hljs-keyword">final</span> java.lang.Object page = <span class="hljs-keyword">this</span>; <span class="hljs-comment">// page 当前</span>
javax.servlet.jsp.JspWriter _jspx_out = <span class="hljs-keyword">null</span>;
javax.servlet.jsp.PageContext _jspx_page_context = <span class="hljs-keyword">null</span>;</code></pre></div>
</li>
<li><p>输出页面前增加的代码</p>
<div class="code-wrapper"><pre><code class="hljs java">response.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>); <span class="hljs-comment">// 设置响应的页面类型</span>
pageContext = _jspxFactory.getPageContext(<span class="hljs-keyword">this</span>, request, response,<span class="hljs-keyword">null</span>, <span class="hljs-keyword">true</span>, <span class="hljs-number">8192</span>, <span class="hljs-keyword">true</span>);
_jspx_page_context = pageContext;
application = pageContext.getServletContext();
config = pageContext.getServletConfig();
session = pageContext.getSession();
out = pageContext.getOut();
_jspx_out = out;</code></pre></div>
</li>
<li><p>以上的这些个对象我们可以直接在JSP页面中使用!</p>
</li>
</ol>
<p>在JSP页面中: </p>
<p>只要是JAVA代码就会原封不东的输出;</p>
<p>如果是HTML代码,就会被转换为</p>
<div class="code-wrapper"><pre><code class="hljs java">out.write(<span class="hljs-string">&quot;&lt;html&gt;\r\n&quot;</span>);</code></pre></div>

<p>这样的格式,输出到前端</p>
<h3 id="6-3-JSP的基础语法"><a href="#6-3-JSP的基础语法" class="headerlink" title="6.3, JSP的基础语法"></a>6.3, JSP的基础语法</h3><p> <strong>JavaWeb第14天</strong></p>
<p><strong>date: 2020.12.22</strong></p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
		<span class="hljs-comment">&lt;!--JSP的依赖--&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
		<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
		
		<span class="hljs-comment">&lt;!--Servlet的依赖--&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
		<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
		
		<span class="hljs-comment">&lt;!--standard标签库--&gt;</span>
		<span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/taglibs/standard --&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>taglibs<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>standard<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
		<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
		
		<span class="hljs-comment">&lt;!--JSTL表达式的依赖--&gt;</span>
		<span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp.jstl/jstl-api --&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp.jstl<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
		<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></code></pre></div>

<p>任何语言都有自己的语法,jsp作为java的技术的一种应用,它拥有一些自己扩充的语法,它支持所有的java语法.</p>
<h4 id="JSP表达式"><a href="#JSP表达式" class="headerlink" title="JSP表达式"></a><strong>JSP表达式</strong></h4><div class="code-wrapper"><pre><code class="hljs jsp">&lt;%--JSP表达式
作用: 用来将程序的输出,输出到客户端
&lt;%= 变量或者表达式%&gt;
--%&gt;
&lt;%= <span class="hljs-keyword">new</span> java.util.Date()%&gt;</code></pre></div>

<h4 id="jsp脚本片段"><a href="#jsp脚本片段" class="headerlink" title="jsp脚本片段"></a><strong>jsp脚本片段</strong></h4><div class="code-wrapper"><pre><code class="hljs jsp">&lt;%--jsp脚本片段--%&gt;
&lt;%
<span class="hljs-keyword">int</span> sum = <span class="hljs-number">0</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;
    sum += i;
&#125;
out.println(<span class="hljs-string">&quot;&lt;h1&gt;Sum=&quot;</span> + sum + <span class="hljs-string">&quot;&lt;/h1&gt;&quot;</span>);
%&gt;</code></pre></div>

<h4 id="脚本呢片段的再实现"><a href="#脚本呢片段的再实现" class="headerlink" title="脚本呢片段的再实现"></a>脚本呢片段的再实现</h4><div class="code-wrapper"><pre><code class="hljs jsp">&lt;%
  <span class="hljs-keyword">int</span> x = <span class="hljs-number">10</span>;
  out.println(x);
%&gt;
&lt;p&gt;这是一个JSP文档&lt;/p&gt;
&lt;%
  <span class="hljs-keyword">int</span> y = <span class="hljs-number">2</span>;
  out.println(y);
%&gt;

&lt;hr&gt;

&lt;%--在代码中嵌入HTML元素--%&gt;
&lt;%
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;
%&gt;
&lt;h1&gt;HeLLo, World &lt;%=i%&gt;&lt;/h1&gt;
&lt;%
  &#125;
%&gt;</code></pre></div>

<h4 id="JSP声明"><a href="#JSP声明" class="headerlink" title="JSP声明"></a><strong>JSP声明</strong></h4><div class="code-wrapper"><pre><code class="hljs jsp">&lt;%!
  <span class="hljs-keyword">static</span> &#123;
    System.out.println(<span class="hljs-string">&quot;Loading Servlet!&quot;</span>);
  &#125;
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> globalVar = <span class="hljs-number">0</span>;
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">pnca</span><span class="hljs-params">()</span> </span>&#123;
    System.out.println(<span class="hljs-string">&quot;进入了方法pnca&quot;</span>);
  &#125;
%&gt;</code></pre></div>

<p>JSP声明: 会被编译到JSP生成的Java类中!其他的,就会被生成到_jspService()方法中!</p>
<p>在JSP中,嵌入java代码即可!</p>
<p>JSP的注释,不会在客户端显示,HTML的就会!</p>
<h3 id="6-4-JSP指令"><a href="#6-4-JSP指令" class="headerlink" title="6.4, JSP指令"></a>6.4, JSP指令</h3><div class="code-wrapper"><pre><code class="hljs mel">&lt;%@page args .... %&gt;
&lt;%@include <span class="hljs-string">&quot;%&gt;</span></code></pre></div>

<h3 id="6-5，九大内置对象"><a href="#6-5，九大内置对象" class="headerlink" title="6.5，九大内置对象"></a>6.5，九大内置对象</h3><p> <strong>JavaWeb第15天</strong></p>
<p><strong>date: 2020.12.24</strong></p>
<ul>
<li>PageContext</li>
<li>Request</li>
<li>Response</li>
<li>Session</li>
<li>Application 【ServletContext】</li>
<li>config  【ServletConfig】</li>
<li>out</li>
<li>page</li>
<li>exception</li>
</ul>
<div class="code-wrapper"><pre><code class="hljs java">pageContext.setAttribute(<span class="hljs-string">&quot;name1&quot;</span>, <span class="hljs-string">&quot;pnca1&quot;</span>); <span class="hljs-comment">// 保存的数据只能在一个页面中有效</span>
	request.setAttribute(<span class="hljs-string">&quot;name2&quot;</span>, <span class="hljs-string">&quot;pnca2&quot;</span>); <span class="hljs-comment">// 保存的数据只能在一次请求中有效,请求转发会携带这个数据</span>
	session.setAttribute(<span class="hljs-string">&quot;name3&quot;</span>, <span class="hljs-string">&quot;pnca3&quot;</span>); <span class="hljs-comment">// 保存的数据只能在一次会话中有效,从打开浏览器到关闭浏览器</span>
	application.setAttribute(<span class="hljs-string">&quot;name4&quot;</span>, <span class="hljs-string">&quot;pnca4&quot;</span>); <span class="hljs-comment">// 保存的数据只在服务器中有效,从打开服务器到关闭服务器</span></code></pre></div>

<h3 id="6-6-JSP标签-JSTL标签-EL表达式"><a href="#6-6-JSP标签-JSTL标签-EL表达式" class="headerlink" title="6.6, JSP标签, JSTL标签,EL表达式"></a>6.6, JSP标签, JSTL标签,EL表达式</h3><p> <strong>JavaWeb第16天</strong></p>
<p><strong>date: 2021.01.17</strong></p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>taglibs<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>standard<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!--JSTL表达式的依赖--&gt;</span>
<span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet.jsp.jstl/jstl-api --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp.jstl<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre></div>

<p>EL表达式:    ${}</p>
<ul>
<li><strong>获取数据</strong></li>
<li><strong>执行运算</strong></li>
<li>获取web开发的常用对象</li>
</ul>
<p>JSP标签</p>
<div class="code-wrapper"><pre><code class="hljs xml">&lt;%--
http://localhost:8080/jsptag.jsp?name=pnca&amp;age=18
--%&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">jsp:forward</span> <span class="hljs-attr">page</span>=<span class="hljs-string">&quot;/jsptag2.jsp&quot;</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">jsp:param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;pnca&quot;</span>/&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">jsp:param</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;18&quot;</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">jsp:forward</span>&gt;</span></code></pre></div>

<p>JSTL标签</p>
<p>JSTL标签的使用就是为了弥补HTML标签的不足; 它自定义了许多标签,可以供我们使用标签的功能和Java代码一样!</p>
<p><strong>核心标签</strong>(掌握部分)</p>
<p><strong>格式化标签</strong></p>
<p><strong>SQL标签</strong></p>
<p><strong>XML标签</strong></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/jstl%E6%A0%B8%E5%BF%83%E6%A0%87%E7%AD%BE.png" alt="image-20210117194315738"></p>
<p>JSTL标签的使用方法</p>
<ul>
<li>引入对应的taglib</li>
<li>使用其中的方法</li>
<li>在Tomcat也需要引入jstl的包,否则会报错:JSTL解析错误</li>
</ul>
<p>c:if</p>
<div class="code-wrapper"><pre><code class="hljs jsp">&lt;%--判断如果提交的用户名是管理员,则登录成功--%&gt;
&lt;c:<span class="hljs-keyword">if</span> test=<span class="hljs-string">&quot;$&#123;param.username == &#x27;admin&#x27;&#125;&quot;</span> <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;isAdmin&quot;</span>&gt;
   &lt;c:out value=<span class="hljs-string">&quot;管理员欢迎您!&quot;</span>/&gt;
&lt;/c:if&gt;
&lt;c:out value=<span class="hljs-string">&quot;$&#123;isAdmin&#125;&gt;&quot;</span>/&gt;</code></pre></div>

<p>c:when</p>
<div class="code-wrapper"><pre><code class="hljs jsp">&lt;c:choose&gt;
   &lt;c:when test=<span class="hljs-string">&quot;$&#123;score &gt;= 90&#125;&quot;</span>&gt;
      您的成绩为优秀
   &lt;/c:when&gt;

   &lt;c:when test=<span class="hljs-string">&quot;$&#123;score &gt;= 80&#125;&quot;</span>&gt;
      您的成绩为一般
   &lt;/c:when&gt;

   &lt;c:when test=<span class="hljs-string">&quot;$&#123;score &gt;= 70&#125;&quot;</span>&gt;
      您的成绩为良好
   &lt;/c:when&gt;

   &lt;c:when test=<span class="hljs-string">&quot;$&#123;score &gt;= 60&#125;&quot;</span>&gt;
      您的成绩为及格
   &lt;/c:when&gt;

   &lt;c:when test=<span class="hljs-string">&quot;$&#123;score &lt; 60&#125;&quot;</span>&gt;
      您的成绩为不及格
   &lt;/c:when&gt;

&lt;/c:choose&gt;</code></pre></div>

<p>c:foreach</p>
<div class="code-wrapper"><pre><code class="hljs jsp">&lt;c:forEach <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;people&quot;</span> items=<span class="hljs-string">&quot;$&#123;list&#125;&quot;</span>&gt;
   &lt;c:out value=<span class="hljs-string">&quot;$&#123;people&#125;&quot;</span>/&gt; &lt;br&gt;
&lt;/c:forEach&gt;

&lt;hr&gt;

&lt;c:forEach <span class="hljs-keyword">var</span>=<span class="hljs-string">&quot;people&quot;</span> items=<span class="hljs-string">&quot;$&#123;list&#125;&quot;</span> begin=<span class="hljs-string">&quot;1&quot;</span> end=<span class="hljs-string">&quot;3&quot;</span> step=<span class="hljs-string">&quot;2&quot;</span>&gt;
   &lt;c:out value=<span class="hljs-string">&quot;$&#123;people&#125;&quot;</span>/&gt; &lt;br&gt;
&lt;/c:forEach&gt;</code></pre></div>

<h2 id="7-JavaBen"><a href="#7-JavaBen" class="headerlink" title="7, JavaBen"></a>7, JavaBen</h2><p>实体类</p>
<p>JavaBean有特定的写法:</p>
<ul>
<li>必须有一个无参构造</li>
<li>属性必须私有化</li>
<li>必须有对应的get/set</li>
</ul>
<p>一般用来和数据库的字段做关系映射 ORM;</p>
<p>ORM:对象关系映射</p>
<ul>
<li>表—&gt;类</li>
<li>字段—&gt;属性</li>
<li>行记录—-&gt;对象</li>
</ul>
<p><strong>people表</strong></p>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
<th>age</th>
<th>address</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>pnca1</td>
<td>12</td>
<td>西安</td>
</tr>
<tr>
<td>2</td>
<td>pnca2</td>
<td>23</td>
<td>西安</td>
</tr>
<tr>
<td>3</td>
<td>pnca3</td>
<td>22</td>
<td>西安</td>
</tr>
</tbody></table>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">People</span> </span>&#123;
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;
	<span class="hljs-keyword">private</span> String name;
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;
	<span class="hljs-keyword">private</span> String address;
&#125;

Class A &#123;
	<span class="hljs-keyword">new</span> People(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;pnca1&quot;</span>, <span class="hljs-number">12</span>, <span class="hljs-string">&quot;西安&quot;</span>)
    <span class="hljs-keyword">new</span> People(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;pnca1&quot;</span>, <span class="hljs-number">12</span>, <span class="hljs-string">&quot;西安&quot;</span>)
    <span class="hljs-keyword">new</span> People(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;pnca1&quot;</span>, <span class="hljs-number">12</span>, <span class="hljs-string">&quot;西安&quot;</span>)
&#125;</code></pre></div>

<ul>
<li>过滤器</li>
<li>文件上传</li>
<li>邮件发送</li>
<li>JDBC复习: 如何使用JDBC, JDBC crud, JDBC事务</li>
</ul>
<h2 id="8-MVC三层架构"><a href="#8-MVC三层架构" class="headerlink" title="8, MVC三层架构"></a>8, MVC三层架构</h2><p>什么是MVC: Mode View Controller 模型，视图，控制器</p>
<h3 id="10-1，早些年"><a href="#10-1，早些年" class="headerlink" title="10.1，早些年"></a>10.1，早些年</h3><p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20210119202913484.png" alt="image-20210119202913484"></p>
<p>用户直接访问控制层，控制层就可以直接操作数据库；</p>
<div class="code-wrapper"><pre><code class="hljs mipsasm">servlet--CRUD--&gt;数据库
弊端：程序十分臃肿，不利于维护
servlet的代码中：处理请求，响应，视图跳转，处理<span class="hljs-keyword">JDBC，处理业务代码，处理逻辑代码</span>
<span class="hljs-keyword"></span>
<span class="hljs-keyword">架构：没有什么是加一层解决不了的！</span>
<span class="hljs-keyword">JDBC</span>
<span class="hljs-keyword"></span>
<span class="hljs-keyword">Mysql </span><span class="hljs-keyword">Oracle </span>SqlServer</code></pre></div>

<p>10.2，三层架构</p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20210119203732844.png" alt="image-20210119203732844"></p>
<p>Model</p>
<ul>
<li>业务处理：业务逻辑（Service）</li>
<li>数据持久层：CRUD（DAO）</li>
</ul>
<p>View</p>
<ul>
<li>展示数据</li>
<li>提供链接发起Servlet请求（a, form, img）</li>
</ul>
<p>Controller（Servlet）</p>
<ul>
<li>接收用户的请求：（req：请求参数，Session信息）</li>
<li>交给业务层处理对应的代码</li>
<li>控制视图的跳转</li>
</ul>
<div class="code-wrapper"><pre><code class="hljs brainfuck"><span class="hljs-comment">登录</span>--<span class="hljs-literal">-</span>&gt;<span class="hljs-comment">接受用户的登录请求</span>--<span class="hljs-literal">-</span>&gt;<span class="hljs-comment">处理用户的请求（获取用户登录的参数</span><span class="hljs-string">,</span><span class="hljs-comment">username，password）</span>--<span class="hljs-literal">-</span>&gt;<span class="hljs-comment">交给业务层处理登录业务（判断用户名密码是否正确：事务）</span>--<span class="hljs-literal">-</span>&gt;<span class="hljs-comment">DAO层查询用户名和密码是否正确</span>--<span class="hljs-literal">-</span>&gt;<span class="hljs-comment">数据库</span></code></pre></div>

<h2 id="9，Filter（重点）"><a href="#9，Filter（重点）" class="headerlink" title="9，Filter（重点）"></a>9，Filter（重点）</h2><p>Filter：过滤器，用来过滤网站的数据</p>
<ul>
<li>处理中文乱码</li>
<li>登录验证</li>
</ul>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20210120201328299.png" alt="image-20210120201328299"></p>
<ol>
<li>导包</li>
</ol>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20210120202413131.png" alt="image-20210120202413131"></p>
<ol start="2">
<li>编写过滤器,实现Filter接口，重写对应的方法即可</li>
</ol>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CharacterEncodingFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>&#123;

	<span class="hljs-comment">// 初始化: web服务器启动,就已经开始初始化,随时等待过滤对象</span>
	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;
		System.out.println(<span class="hljs-string">&quot;CharacterEncodingFilter初始化&quot;</span>);
	&#125;

	<span class="hljs-comment">// Chain:链</span>
	<span class="hljs-comment">/*</span>
<span class="hljs-comment">	1.过滤器中的所有代码,在过滤特定请求的时候都会被执行</span>
<span class="hljs-comment">	2.必须让过滤器继续执行</span>
<span class="hljs-comment">	filterChain.doFilter(servletRequest, servletResponse);</span>
<span class="hljs-comment">	 */</span>
	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;
		servletRequest.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);
		servletResponse.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);
		servletResponse.setContentType(<span class="hljs-string">&quot;text/html;charset=UTF-8&quot;</span>);

		System.out.println(<span class="hljs-string">&quot;CharacterEncodingFilter执行前...&quot;</span>);
		filterChain.doFilter(servletRequest, servletResponse); <span class="hljs-comment">// 让我们的请求继续走,如果不写,程序到这里就会被拦截!</span>
		System.out.println(<span class="hljs-string">&quot;CharacterEncodingFilter执行后...&quot;</span>);
	&#125;

	<span class="hljs-comment">// 销毁: web服务器关闭,过滤器才会销毁</span>
	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;
		System.out.println(<span class="hljs-string">&quot;CharacterEncodingFilter销毁&quot;</span>);
	&#125;
&#125;</code></pre></div>

<ol start="3">
<li>在web.xml中,配置Filter</li>
</ol>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.pnca.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span>
    <span class="hljs-comment">&lt;!--只要是/servlet的请求,都会经过这个过滤器--&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/servlet/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
    <span class="hljs-comment">&lt;!--&lt;url-pattern&gt;/*&lt;/url-pattern&gt;--&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span></code></pre></div>

<h2 id="10，监听器"><a href="#10，监听器" class="headerlink" title="10，监听器"></a>10，监听器</h2><ol>
<li><p>实现一个监听器接口</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OnlineCountListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">HttpSessionListener</span> </span>&#123;

	<span class="hljs-comment">// 创建session监听</span>
	<span class="hljs-comment">// 一旦创建Session就会触发一次这个事件</span>
	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sessionCreated</span><span class="hljs-params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;

		ServletContext servletContext = httpSessionEvent.getSession().getServletContext();
		System.out.println(httpSessionEvent.getSession().getId());
		Integer onlineCount = (Integer) servletContext.getAttribute(<span class="hljs-string">&quot;OnlineCount&quot;</span>);
		<span class="hljs-keyword">if</span> (onlineCount == <span class="hljs-keyword">null</span>) &#123;
			onlineCount = <span class="hljs-number">1</span>;
		&#125;<span class="hljs-keyword">else</span>&#123;
			<span class="hljs-keyword">int</span> count = onlineCount;
			onlineCount = count + <span class="hljs-number">1</span>;
		&#125;
		servletContext.setAttribute(<span class="hljs-string">&quot;OnlineCount&quot;</span>, onlineCount);
	&#125;

	<span class="hljs-comment">// 销毁session监听</span>
	<span class="hljs-comment">// 一旦销毁Session就会触发一次这个事件</span>
	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sessionDestroyed</span><span class="hljs-params">(HttpSessionEvent httpSessionEvent)</span> </span>&#123;
		ServletContext servletContext = httpSessionEvent.getSession().getServletContext();
		Integer onlineCount = (Integer) servletContext.getAttribute(<span class="hljs-string">&quot;OnlineCount&quot;</span>);
		<span class="hljs-keyword">if</span> (onlineCount == <span class="hljs-keyword">null</span>) &#123;
			onlineCount = <span class="hljs-number">0</span>;
		&#125;<span class="hljs-keyword">else</span>&#123;
			<span class="hljs-keyword">int</span> count = onlineCount;
			onlineCount = count - <span class="hljs-number">1</span>;
		&#125;
		servletContext.setAttribute(<span class="hljs-string">&quot;OnlineCount&quot;</span>, onlineCount);
	&#125;
&#125;</code></pre></div>
</li>
<li><p>web.xml中注册监听器</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--注册监听器--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">listener</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">listener-class</span>&gt;</span>com.pnca.listener.OnlineCountListener<span class="hljs-tag">&lt;/<span class="hljs-name">listener-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">listener</span>&gt;</span></code></pre></div>
</li>
<li><p>看情况是否使用</p>
</li>
</ol>
<h2 id="11，过滤器，监听器常见应用"><a href="#11，过滤器，监听器常见应用" class="headerlink" title="11，过滤器，监听器常见应用"></a>11，过滤器，监听器常见应用</h2><p><strong>监听器: GUI编程中经常使用</strong></p>
<p>用户登录之后才能进入主页!用户注销后就不能进入主页!</p>
<ol>
<li><p>用户登录之后,向Session中放入用户数据</p>
</li>
<li><p>进入主页的时候要判断用户是否已经登录;要求: 在过滤器中实现</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;

		HttpServletRequest request = (HttpServletRequest)servletRequest;
		HttpServletResponse response = (HttpServletResponse)servletResponse;

		<span class="hljs-keyword">if</span>(request.getSession().getAttribute(Constant.USER_SESSION) == <span class="hljs-keyword">null</span>) &#123;
			response.sendRedirect(<span class="hljs-string">&quot;/error.jsp&quot;</span>);
		&#125;

		filterChain.doFilter(servletRequest, servletResponse);
	&#125;</code></pre></div>



</li>
</ol>
<h2 id="12，JDBC"><a href="#12，JDBC" class="headerlink" title="12，JDBC"></a>12，JDBC</h2><p>什么是JDBC：java连接数据库</p>
<p>需要jar包的支持：</p>
<ul>
<li>java.spl</li>
<li>javax.sql</li>
<li>mysql-conneter-java… 连接驱动(必须要导入)</li>
</ul>
<p><strong>实验环境搭建</strong></p>
<ol>
<li><p>创建一个测试数据库和一个users表</p>
</li>
<li><p>导入数据库依赖</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span></code></pre></div>
</li>
<li><p>IDEA中连接数据库,注意要设置时区   <strong>[serverTimezone=GMT]</strong></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20210124201810440.png" alt="image-20210124201810440"></p>
</li>
<li><p>JDBC一般步骤</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// 配置信息</span>
String url = <span class="hljs-string">&quot;jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT&quot;</span>; <span class="hljs-comment">// 注意点</span>
String username = <span class="hljs-string">&quot;****&quot;</span>;
String password = <span class="hljs-string">&quot;****&quot;</span>;

<span class="hljs-comment">// 1,加载驱动</span>
Class.forName(<span class="hljs-string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);
<span class="hljs-comment">// 2,连接数据库</span>
Connection connection = DriverManager.getConnection(url, username, password);
<span class="hljs-comment">// 3,向数据库发送SQL对象的Statement : CRUD</span>
Statement statement = connection.createStatement();
<span class="hljs-comment">// 4.编写sql</span>
String sql = <span class="hljs-string">&quot;select * from users&quot;</span>;
<span class="hljs-comment">// 5,执行查询sql,返回resultSet结果集</span>
ResultSet resultSet = statement.executeQuery(sql);

<span class="hljs-keyword">while</span> (resultSet.next())&#123;
    System.out.println(<span class="hljs-string">&quot;id=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;id&quot;</span>));
    System.out.println(<span class="hljs-string">&quot;name=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;name&quot;</span>));
    System.out.println(<span class="hljs-string">&quot;password=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;password&quot;</span>));
    System.out.println(<span class="hljs-string">&quot;email=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;email&quot;</span>));
    System.out.println(<span class="hljs-string">&quot;birthday=&quot;</span> + resultSet.getObject(<span class="hljs-string">&quot;birthday&quot;</span>));
    System.out.println();
&#125;

<span class="hljs-comment">// 6,关闭连接,释放资源,掀开的后关</span>
resultSet.close();
statement.close();
connection.close();
</code></pre></div>

</li>
</ol>
<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><p>要么都成功,要么都失败!</p>
<p>ACID: 保证数据的安全。</p>
<ul>
<li>开启事务</li>
<li>事务提交：commit()</li>
<li>事务回滚：rollback()</li>
<li>关闭事务</li>
</ul>
<p>Junit测试</p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20210125200341950.png" alt="image-20210125200341950"></p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20210125200414496.png" alt="image-20210125200414496"></p>
<p>搭建一个环境，测试事务</p>
<h2 id="13，SMBMS订单管理系统"><a href="#13，SMBMS订单管理系统" class="headerlink" title="13，SMBMS订单管理系统"></a>13，SMBMS订单管理系统</h2><h3 id="1-架构"><a href="#1-架构" class="headerlink" title="1 架构"></a>1 架构</h3><p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20210126210811332.png" alt="image-20210126210811332"></p>
<h3 id="2-数据库"><a href="#2-数据库" class="headerlink" title="2 数据库"></a>2 数据库</h3><p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20210126210835622.png" alt="image-20210126210835622"></p>
<p><strong>SQL语句</strong></p>
<div class="code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE `smbms`;

USE `smbms`;

<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `smbms_address`;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `smbms_address` (
  `id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;主键ID&#x27;</span>,
  `contact` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">15</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;联系人姓名&#x27;</span>,
  `addressDesc` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;收货地址明细&#x27;</span>,
  `postCode` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">15</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;邮编&#x27;</span>,
  `tel` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;联系人电话&#x27;</span>,
  `createdBy` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;创建者&#x27;</span>,
  `creationDate` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;创建时间&#x27;</span>,
  `modifyBy` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;修改者&#x27;</span>,
  `modifyDate` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;修改时间&#x27;</span>,
  `userId` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;用户ID&#x27;</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)
) ENGINE<span class="hljs-operator">=</span>INNODB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">7</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_unicode_ci;


<span class="hljs-keyword">INSERT</span>  <span class="hljs-keyword">INTO</span> `smbms_address`(`id`,`contact`,`addressDesc`,`postCode`,`tel`,`createdBy`,`creationDate`,`modifyBy`,`modifyDate`,`userId`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;王丽&#x27;</span>,<span class="hljs-string">&#x27;北京市东城区东交民巷44号&#x27;</span>,<span class="hljs-string">&#x27;100010&#x27;</span>,<span class="hljs-string">&#x27;13678789999&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-13 00:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;张红丽&#x27;</span>,<span class="hljs-string">&#x27;北京市海淀区丹棱街3号&#x27;</span>,<span class="hljs-string">&#x27;100000&#x27;</span>,<span class="hljs-string">&#x27;18567672312&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-13 00:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;任志强&#x27;</span>,<span class="hljs-string">&#x27;北京市东城区美术馆后街23号&#x27;</span>,<span class="hljs-string">&#x27;100021&#x27;</span>,<span class="hljs-string">&#x27;13387906742&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-13 00:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;曹颖&#x27;</span>,<span class="hljs-string">&#x27;北京市朝阳区朝阳门南大街14号&#x27;</span>,<span class="hljs-string">&#x27;100053&#x27;</span>,<span class="hljs-string">&#x27;13568902323&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-13 00:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;李慧&#x27;</span>,<span class="hljs-string">&#x27;北京市西城区三里河路南三巷3号&#x27;</span>,<span class="hljs-string">&#x27;100032&#x27;</span>,<span class="hljs-string">&#x27;18032356666&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-13 00:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">6</span>,<span class="hljs-string">&#x27;王国强&#x27;</span>,<span class="hljs-string">&#x27;北京市顺义区高丽营镇金马工业区18号&#x27;</span>,<span class="hljs-string">&#x27;100061&#x27;</span>,<span class="hljs-string">&#x27;13787882222&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-13 00:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">3</span>);


<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `smbms_bill`;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `smbms_bill` (
  `id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;主键ID&#x27;</span>,
  `billCode` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;账单编码&#x27;</span>,
  `productName` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;商品名称&#x27;</span>,
  `productDesc` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;商品描述&#x27;</span>,
  `productUnit` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;商品单位&#x27;</span>,
  `productCount` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">20</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;商品数量&#x27;</span>,
  `totalPrice` <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">20</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;商品总额&#x27;</span>,
  `isPayment` <span class="hljs-type">INT</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;是否支付（1：未支付 2：已支付）&#x27;</span>,
  `createdBy` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;创建者（userId）&#x27;</span>,
  `creationDate` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;创建时间&#x27;</span>,
  `modifyBy` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;更新者（userId）&#x27;</span>,
  `modifyDate` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;更新时间&#x27;</span>,
  `providerId` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;供应商ID&#x27;</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)
) ENGINE<span class="hljs-operator">=</span>INNODB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">19</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_unicode_ci;


<span class="hljs-keyword">INSERT</span>  <span class="hljs-keyword">INTO</span> `smbms_bill`(`id`,`billCode`,`productName`,`productDesc`,`productUnit`,`productCount`,`totalPrice`,`isPayment`,`createdBy`,`creationDate`,`modifyBy`,`modifyDate`,`providerId`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;BILL2016_002&#x27;</span>,<span class="hljs-string">&#x27;香皂、肥皂、药皂&#x27;</span>,<span class="hljs-string">&#x27;日用品-皂类&#x27;</span>,<span class="hljs-string">&#x27;块&#x27;</span>,<span class="hljs-string">&#x27;1000.00&#x27;</span>,<span class="hljs-string">&#x27;10000.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-03-23 04:20:40&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">13</span>),(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;BILL2016_003&#x27;</span>,<span class="hljs-string">&#x27;大豆油&#x27;</span>,<span class="hljs-string">&#x27;食品-食用油&#x27;</span>,<span class="hljs-string">&#x27;斤&#x27;</span>,<span class="hljs-string">&#x27;300.00&#x27;</span>,<span class="hljs-string">&#x27;5890.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2014-12-14 13:02:03&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">6</span>),(<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;BILL2016_004&#x27;</span>,<span class="hljs-string">&#x27;橄榄油&#x27;</span>,<span class="hljs-string">&#x27;食品-进口食用油&#x27;</span>,<span class="hljs-string">&#x27;斤&#x27;</span>,<span class="hljs-string">&#x27;200.00&#x27;</span>,<span class="hljs-string">&#x27;9800.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2013-10-10 03:12:13&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">7</span>),(<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;BILL2016_005&#x27;</span>,<span class="hljs-string">&#x27;洗洁精&#x27;</span>,<span class="hljs-string">&#x27;日用品-厨房清洁&#x27;</span>,<span class="hljs-string">&#x27;瓶&#x27;</span>,<span class="hljs-string">&#x27;500.00&#x27;</span>,<span class="hljs-string">&#x27;7000.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2014-12-14 13:02:03&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">9</span>),(<span class="hljs-number">6</span>,<span class="hljs-string">&#x27;BILL2016_006&#x27;</span>,<span class="hljs-string">&#x27;美国大杏仁&#x27;</span>,<span class="hljs-string">&#x27;食品-坚果&#x27;</span>,<span class="hljs-string">&#x27;袋&#x27;</span>,<span class="hljs-string">&#x27;300.00&#x27;</span>,<span class="hljs-string">&#x27;5000.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-14 06:08:09&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">4</span>),(<span class="hljs-number">7</span>,<span class="hljs-string">&#x27;BILL2016_007&#x27;</span>,<span class="hljs-string">&#x27;沐浴液、精油&#x27;</span>,<span class="hljs-string">&#x27;日用品-沐浴类&#x27;</span>,<span class="hljs-string">&#x27;瓶&#x27;</span>,<span class="hljs-string">&#x27;500.00&#x27;</span>,<span class="hljs-string">&#x27;23000.00&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-07-22 10:10:22&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">14</span>),(<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;BILL2016_008&#x27;</span>,<span class="hljs-string">&#x27;不锈钢盘碗&#x27;</span>,<span class="hljs-string">&#x27;日用品-厨房用具&#x27;</span>,<span class="hljs-string">&#x27;个&#x27;</span>,<span class="hljs-string">&#x27;600.00&#x27;</span>,<span class="hljs-string">&#x27;6000.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-14 05:12:13&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">14</span>),(<span class="hljs-number">9</span>,<span class="hljs-string">&#x27;BILL2016_009&#x27;</span>,<span class="hljs-string">&#x27;塑料杯&#x27;</span>,<span class="hljs-string">&#x27;日用品-杯子&#x27;</span>,<span class="hljs-string">&#x27;个&#x27;</span>,<span class="hljs-string">&#x27;350.00&#x27;</span>,<span class="hljs-string">&#x27;1750.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-02-04 11:40:20&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">14</span>),(<span class="hljs-number">10</span>,<span class="hljs-string">&#x27;BILL2016_010&#x27;</span>,<span class="hljs-string">&#x27;豆瓣酱&#x27;</span>,<span class="hljs-string">&#x27;食品-调料&#x27;</span>,<span class="hljs-string">&#x27;瓶&#x27;</span>,<span class="hljs-string">&#x27;200.00&#x27;</span>,<span class="hljs-string">&#x27;2000.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2013-10-29 05:07:03&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">8</span>),(<span class="hljs-number">11</span>,<span class="hljs-string">&#x27;BILL2016_011&#x27;</span>,<span class="hljs-string">&#x27;海之蓝&#x27;</span>,<span class="hljs-string">&#x27;饮料-国酒&#x27;</span>,<span class="hljs-string">&#x27;瓶&#x27;</span>,<span class="hljs-string">&#x27;50.00&#x27;</span>,<span class="hljs-string">&#x27;10000.00&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-14 16:16:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">12</span>,<span class="hljs-string">&#x27;BILL2016_012&#x27;</span>,<span class="hljs-string">&#x27;芝华士&#x27;</span>,<span class="hljs-string">&#x27;饮料-洋酒&#x27;</span>,<span class="hljs-string">&#x27;瓶&#x27;</span>,<span class="hljs-string">&#x27;20.00&#x27;</span>,<span class="hljs-string">&#x27;6000.00&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-09-09 17:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">13</span>,<span class="hljs-string">&#x27;BILL2016_013&#x27;</span>,<span class="hljs-string">&#x27;长城红葡萄酒&#x27;</span>,<span class="hljs-string">&#x27;饮料-红酒&#x27;</span>,<span class="hljs-string">&#x27;瓶&#x27;</span>,<span class="hljs-string">&#x27;60.00&#x27;</span>,<span class="hljs-string">&#x27;800.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-11-14 15:23:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">1</span>),(<span class="hljs-number">14</span>,<span class="hljs-string">&#x27;BILL2016_014&#x27;</span>,<span class="hljs-string">&#x27;泰国香米&#x27;</span>,<span class="hljs-string">&#x27;食品-大米&#x27;</span>,<span class="hljs-string">&#x27;斤&#x27;</span>,<span class="hljs-string">&#x27;400.00&#x27;</span>,<span class="hljs-string">&#x27;5000.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-10-09 15:20:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">15</span>,<span class="hljs-string">&#x27;BILL2016_015&#x27;</span>,<span class="hljs-string">&#x27;东北大米&#x27;</span>,<span class="hljs-string">&#x27;食品-大米&#x27;</span>,<span class="hljs-string">&#x27;斤&#x27;</span>,<span class="hljs-string">&#x27;600.00&#x27;</span>,<span class="hljs-string">&#x27;4000.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-11-14 14:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">3</span>),(<span class="hljs-number">16</span>,<span class="hljs-string">&#x27;BILL2016_016&#x27;</span>,<span class="hljs-string">&#x27;可口可乐&#x27;</span>,<span class="hljs-string">&#x27;饮料&#x27;</span>,<span class="hljs-string">&#x27;瓶&#x27;</span>,<span class="hljs-string">&#x27;2000.00&#x27;</span>,<span class="hljs-string">&#x27;6000.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2012-03-27 13:03:01&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">17</span>,<span class="hljs-string">&#x27;BILL2016_017&#x27;</span>,<span class="hljs-string">&#x27;脉动&#x27;</span>,<span class="hljs-string">&#x27;饮料&#x27;</span>,<span class="hljs-string">&#x27;瓶&#x27;</span>,<span class="hljs-string">&#x27;1500.00&#x27;</span>,<span class="hljs-string">&#x27;4500.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-05-10 12:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">2</span>),(<span class="hljs-number">18</span>,<span class="hljs-string">&#x27;BILL2016_018&#x27;</span>,<span class="hljs-string">&#x27;哇哈哈&#x27;</span>,<span class="hljs-string">&#x27;饮料&#x27;</span>,<span class="hljs-string">&#x27;瓶&#x27;</span>,<span class="hljs-string">&#x27;2000.00&#x27;</span>,<span class="hljs-string">&#x27;4000.00&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2015-11-24 15:12:03&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-number">2</span>);

<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `smbms_provider`;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `smbms_provider` (
  `id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;主键ID&#x27;</span>,
  `proCode` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;供应商编码&#x27;</span>,
  `proName` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;供应商名称&#x27;</span>,
  `proDesc` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;供应商详细描述&#x27;</span>,
  `proContact` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;供应商联系人&#x27;</span>,
  `proPhone` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;联系电话&#x27;</span>,
  `proAddress` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;地址&#x27;</span>,
  `proFax` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;传真&#x27;</span>,
  `createdBy` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;创建者（userId）&#x27;</span>,
  `creationDate` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;创建时间&#x27;</span>,
  `modifyDate` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;更新时间&#x27;</span>,
  `modifyBy` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;更新者（userId）&#x27;</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)
) ENGINE<span class="hljs-operator">=</span>INNODB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">16</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_unicode_ci;


<span class="hljs-keyword">INSERT</span>  <span class="hljs-keyword">INTO</span> `smbms_provider`(`id`,`proCode`,`proName`,`proDesc`,`proContact`,`proPhone`,`proAddress`,`proFax`,`createdBy`,`creationDate`,`modifyDate`,`modifyBy`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;BJ_GYS001&#x27;</span>,<span class="hljs-string">&#x27;北京三木堂商贸有限公司&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品:茅台、五粮液、郎酒、酒鬼酒、泸州老窖、赖茅酒、法国红酒等&#x27;</span>,<span class="hljs-string">&#x27;张国强&#x27;</span>,<span class="hljs-string">&#x27;13566667777&#x27;</span>,<span class="hljs-string">&#x27;北京市丰台区育芳园北路&#x27;</span>,<span class="hljs-string">&#x27;010-58858787&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2013-03-21 16:52:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;HB_GYS001&#x27;</span>,<span class="hljs-string">&#x27;石家庄帅益食品贸易有限公司&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品:饮料、水饮料、植物蛋白饮料、休闲食品、果汁饮料、功能饮料等&#x27;</span>,<span class="hljs-string">&#x27;王军&#x27;</span>,<span class="hljs-string">&#x27;13309094212&#x27;</span>,<span class="hljs-string">&#x27;河北省石家庄新华区&#x27;</span>,<span class="hljs-string">&#x27;0311-67738876&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-13 04:20:40&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;GZ_GYS001&#x27;</span>,<span class="hljs-string">&#x27;深圳市泰香米业有限公司&#x27;</span>,<span class="hljs-string">&#x27;初次合作伙伴，主营产品：良记金轮米,龙轮香米等&#x27;</span>,<span class="hljs-string">&#x27;郑程瀚&#x27;</span>,<span class="hljs-string">&#x27;13402013312&#x27;</span>,<span class="hljs-string">&#x27;广东省深圳市福田区深南大道6006华丰大厦&#x27;</span>,<span class="hljs-string">&#x27;0755-67776212&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2014-03-21 16:56:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">4</span>,<span class="hljs-string">&#x27;GZ_GYS002&#x27;</span>,<span class="hljs-string">&#x27;深圳市喜来客商贸有限公司&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品：坚果炒货.果脯蜜饯.天然花茶.营养豆豆.特色美食.进口食品.海味零食.肉脯肉&#x27;</span>,<span class="hljs-string">&#x27;林妮&#x27;</span>,<span class="hljs-string">&#x27;18599897645&#x27;</span>,<span class="hljs-string">&#x27;广东省深圳市福龙工业区B2栋3楼西&#x27;</span>,<span class="hljs-string">&#x27;0755-67772341&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2013-03-22 16:52:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;JS_GYS001&#x27;</span>,<span class="hljs-string">&#x27;兴化佳美调味品厂&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品：天然香辛料、鸡精、复合调味料&#x27;</span>,<span class="hljs-string">&#x27;徐国洋&#x27;</span>,<span class="hljs-string">&#x27;13754444221&#x27;</span>,<span class="hljs-string">&#x27;江苏省兴化市林湖工业区&#x27;</span>,<span class="hljs-string">&#x27;0523-21299098&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2015-11-22 16:52:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">6</span>,<span class="hljs-string">&#x27;BJ_GYS002&#x27;</span>,<span class="hljs-string">&#x27;北京纳福尔食用油有限公司&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品：山茶油、大豆油、花生油、橄榄油等&#x27;</span>,<span class="hljs-string">&#x27;马莺&#x27;</span>,<span class="hljs-string">&#x27;13422235678&#x27;</span>,<span class="hljs-string">&#x27;北京市朝阳区珠江帝景1号楼&#x27;</span>,<span class="hljs-string">&#x27;010-588634233&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2012-03-21 17:52:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">7</span>,<span class="hljs-string">&#x27;BJ_GYS003&#x27;</span>,<span class="hljs-string">&#x27;北京国粮食用油有限公司&#x27;</span>,<span class="hljs-string">&#x27;初次合作伙伴，主营产品：花生油、大豆油、小磨油等&#x27;</span>,<span class="hljs-string">&#x27;王驰&#x27;</span>,<span class="hljs-string">&#x27;13344441135&#x27;</span>,<span class="hljs-string">&#x27;北京大兴青云店开发区&#x27;</span>,<span class="hljs-string">&#x27;010-588134111&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-13 00:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;ZJ_GYS001&#x27;</span>,<span class="hljs-string">&#x27;慈溪市广和绿色食品厂&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品：豆瓣酱、黄豆酱、甜面酱，辣椒，大蒜等农产品&#x27;</span>,<span class="hljs-string">&#x27;薛圣丹&#x27;</span>,<span class="hljs-string">&#x27;18099953223&#x27;</span>,<span class="hljs-string">&#x27;浙江省宁波市慈溪周巷小安村&#x27;</span>,<span class="hljs-string">&#x27;0574-34449090&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2013-11-21 06:02:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">9</span>,<span class="hljs-string">&#x27;GX_GYS001&#x27;</span>,<span class="hljs-string">&#x27;优百商贸有限公司&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品：日化产品&#x27;</span>,<span class="hljs-string">&#x27;李立国&#x27;</span>,<span class="hljs-string">&#x27;13323566543&#x27;</span>,<span class="hljs-string">&#x27;广西南宁市秀厢大道42-1号&#x27;</span>,<span class="hljs-string">&#x27;0771-98861134&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2013-03-21 19:52:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">10</span>,<span class="hljs-string">&#x27;JS_GYS002&#x27;</span>,<span class="hljs-string">&#x27;南京火头军信息技术有限公司&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品：不锈钢厨具等&#x27;</span>,<span class="hljs-string">&#x27;陈女士&#x27;</span>,<span class="hljs-string">&#x27;13098992113&#x27;</span>,<span class="hljs-string">&#x27;江苏省南京市浦口区浦口大道1号新城总部大厦A座903室&#x27;</span>,<span class="hljs-string">&#x27;025-86223345&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2013-03-25 16:52:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">11</span>,<span class="hljs-string">&#x27;GZ_GYS003&#x27;</span>,<span class="hljs-string">&#x27;广州市白云区美星五金制品厂&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品：海绵床垫、坐垫、靠垫、海绵枕头、头枕等&#x27;</span>,<span class="hljs-string">&#x27;梁天&#x27;</span>,<span class="hljs-string">&#x27;13562276775&#x27;</span>,<span class="hljs-string">&#x27;广州市白云区钟落潭镇福龙路20号&#x27;</span>,<span class="hljs-string">&#x27;020-85542231&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-12-21 06:12:17&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">12</span>,<span class="hljs-string">&#x27;BJ_GYS004&#x27;</span>,<span class="hljs-string">&#x27;北京隆盛日化科技&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品：日化环保清洗剂，家居洗涤专卖、洗涤用品网、墙体除霉剂、墙面霉菌清除剂等&#x27;</span>,<span class="hljs-string">&#x27;孙欣&#x27;</span>,<span class="hljs-string">&#x27;13689865678&#x27;</span>,<span class="hljs-string">&#x27;北京市大兴区旧宫&#x27;</span>,<span class="hljs-string">&#x27;010-35576786&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2014-11-21 12:51:11&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">13</span>,<span class="hljs-string">&#x27;SD_GYS001&#x27;</span>,<span class="hljs-string">&#x27;山东豪克华光联合发展有限公司&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品：洗衣皂、洗衣粉、洗衣液、洗洁精、消杀类、香皂等&#x27;</span>,<span class="hljs-string">&#x27;吴洪转&#x27;</span>,<span class="hljs-string">&#x27;13245468787&#x27;</span>,<span class="hljs-string">&#x27;山东济阳济北工业区仁和街21号&#x27;</span>,<span class="hljs-string">&#x27;0531-53362445&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2015-01-28 10:52:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">14</span>,<span class="hljs-string">&#x27;JS_GYS003&#x27;</span>,<span class="hljs-string">&#x27;无锡喜源坤商行&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品：日化品批销&#x27;</span>,<span class="hljs-string">&#x27;周一清&#x27;</span>,<span class="hljs-string">&#x27;18567674532&#x27;</span>,<span class="hljs-string">&#x27;江苏无锡盛岸西路&#x27;</span>,<span class="hljs-string">&#x27;0510-32274422&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-23 11:11:11&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">15</span>,<span class="hljs-string">&#x27;ZJ_GYS002&#x27;</span>,<span class="hljs-string">&#x27;乐摆日用品厂&#x27;</span>,<span class="hljs-string">&#x27;长期合作伙伴，主营产品：各种中、高档塑料杯，塑料乐扣水杯（密封杯）、保鲜杯（保鲜盒）、广告杯、礼品杯&#x27;</span>,<span class="hljs-string">&#x27;王世杰&#x27;</span>,<span class="hljs-string">&#x27;13212331567&#x27;</span>,<span class="hljs-string">&#x27;浙江省金华市义乌市义东路&#x27;</span>,<span class="hljs-string">&#x27;0579-34452321&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-08-22 10:01:30&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>);


<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `smbms_role`;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `smbms_role` (
  `id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;主键ID&#x27;</span>,
  `roleCode` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">15</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;角色编码&#x27;</span>,
  `roleName` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">15</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;角色名称&#x27;</span>,
  `createdBy` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;创建者&#x27;</span>,
  `creationDate` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;创建时间&#x27;</span>,
  `modifyBy` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;修改者&#x27;</span>,
  `modifyDate` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;修改时间&#x27;</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)
) ENGINE<span class="hljs-operator">=</span>INNODB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">4</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_unicode_ci;


<span class="hljs-keyword">INSERT</span>  <span class="hljs-keyword">INTO</span> `smbms_role`(`id`,`roleCode`,`roleName`,`createdBy`,`creationDate`,`modifyBy`,`modifyDate`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;SMBMS_ADMIN&#x27;</span>,<span class="hljs-string">&#x27;系统管理员&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-13 00:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;SMBMS_MANAGER&#x27;</span>,<span class="hljs-string">&#x27;经理&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-13 00:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">3</span>,<span class="hljs-string">&#x27;SMBMS_EMPLOYEE&#x27;</span>,<span class="hljs-string">&#x27;普通员工&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-13 00:00:00&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>);


<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `smbms_user`;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `smbms_user` (
  `id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;主键ID&#x27;</span>,
  `userCode` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">15</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;用户编码&#x27;</span>,
  `userName` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">15</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;用户名称&#x27;</span>,
  `userPassword` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">15</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;用户密码&#x27;</span>,
  `gender` <span class="hljs-type">INT</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;性别（1:女、 2:男）&#x27;</span>,
  `birthday` <span class="hljs-type">DATE</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;出生日期&#x27;</span>,
  `phone` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">15</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;手机&#x27;</span>,
  `address` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">COLLATE</span> utf8_unicode_ci <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;地址&#x27;</span>,
  `userRole` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;用户角色（取自角色表-角色id）&#x27;</span>,
  `createdBy` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;创建者（userId）&#x27;</span>,
  `creationDate` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;创建时间&#x27;</span>,
  `modifyBy` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;更新者（userId）&#x27;</span>,
  `modifyDate` DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;更新时间&#x27;</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)
) ENGINE<span class="hljs-operator">=</span>INNODB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">16</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_unicode_ci;

<span class="hljs-keyword">INSERT</span>  <span class="hljs-keyword">INTO</span> `smbms_user`(`id`,`userCode`,`userName`,`userPassword`,`gender`,`birthday`,`phone`,`address`,`userRole`,`createdBy`,`creationDate`,`modifyBy`,`modifyDate`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;admin&#x27;</span>,<span class="hljs-string">&#x27;系统管理员&#x27;</span>,<span class="hljs-string">&#x27;1234567&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;1983-10-10&#x27;</span>,<span class="hljs-string">&#x27;13688889999&#x27;</span>,<span class="hljs-string">&#x27;北京市海淀区成府路207号&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2013-03-21 16:52:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;liming&#x27;</span>,<span class="hljs-string">&#x27;李明&#x27;</span>,<span class="hljs-string">&#x27;0000000&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;1983-12-10&#x27;</span>,<span class="hljs-string">&#x27;13688884457&#x27;</span>,<span class="hljs-string">&#x27;北京市东城区前门东大街9号&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2014-12-31 19:52:09&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">5</span>,<span class="hljs-string">&#x27;hanlubiao&#x27;</span>,<span class="hljs-string">&#x27;韩路彪&#x27;</span>,<span class="hljs-string">&#x27;0000000&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;1984-06-05&#x27;</span>,<span class="hljs-string">&#x27;18567542321&#x27;</span>,<span class="hljs-string">&#x27;北京市朝阳区北辰中心12号&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2014-12-31 19:52:09&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">6</span>,<span class="hljs-string">&#x27;zhanghua&#x27;</span>,<span class="hljs-string">&#x27;张华&#x27;</span>,<span class="hljs-string">&#x27;0000000&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;1983-06-15&#x27;</span>,<span class="hljs-string">&#x27;13544561111&#x27;</span>,<span class="hljs-string">&#x27;北京市海淀区学院路61号&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2013-02-11 10:51:17&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">7</span>,<span class="hljs-string">&#x27;wangyang&#x27;</span>,<span class="hljs-string">&#x27;王洋&#x27;</span>,<span class="hljs-string">&#x27;0000000&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;1982-12-31&#x27;</span>,<span class="hljs-string">&#x27;13444561124&#x27;</span>,<span class="hljs-string">&#x27;北京市海淀区西二旗辉煌国际16层&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2014-06-11 19:09:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">8</span>,<span class="hljs-string">&#x27;zhaoyan&#x27;</span>,<span class="hljs-string">&#x27;赵燕&#x27;</span>,<span class="hljs-string">&#x27;0000000&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;1986-03-07&#x27;</span>,<span class="hljs-string">&#x27;18098764545&#x27;</span>,<span class="hljs-string">&#x27;北京市海淀区回龙观小区10号楼&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-21 13:54:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">10</span>,<span class="hljs-string">&#x27;sunlei&#x27;</span>,<span class="hljs-string">&#x27;孙磊&#x27;</span>,<span class="hljs-string">&#x27;0000000&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;1981-01-04&#x27;</span>,<span class="hljs-string">&#x27;13387676765&#x27;</span>,<span class="hljs-string">&#x27;北京市朝阳区管庄新月小区12楼&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2015-05-06 10:52:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">11</span>,<span class="hljs-string">&#x27;sunxing&#x27;</span>,<span class="hljs-string">&#x27;孙兴&#x27;</span>,<span class="hljs-string">&#x27;0000000&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;1978-03-12&#x27;</span>,<span class="hljs-string">&#x27;13367890900&#x27;</span>,<span class="hljs-string">&#x27;北京市朝阳区建国门南大街10号&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-11-09 16:51:17&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">12</span>,<span class="hljs-string">&#x27;zhangchen&#x27;</span>,<span class="hljs-string">&#x27;张晨&#x27;</span>,<span class="hljs-string">&#x27;0000000&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;1986-03-28&#x27;</span>,<span class="hljs-string">&#x27;18098765434&#x27;</span>,<span class="hljs-string">&#x27;朝阳区管庄路口北柏林爱乐三期13号楼&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-08-09 05:52:37&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-04-14 14:15:36&#x27;</span>),(<span class="hljs-number">13</span>,<span class="hljs-string">&#x27;dengchao&#x27;</span>,<span class="hljs-string">&#x27;邓超&#x27;</span>,<span class="hljs-string">&#x27;0000000&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;1981-11-04&#x27;</span>,<span class="hljs-string">&#x27;13689674534&#x27;</span>,<span class="hljs-string">&#x27;北京市海淀区北航家属院10号楼&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2016-07-11 08:02:47&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">14</span>,<span class="hljs-string">&#x27;yangguo&#x27;</span>,<span class="hljs-string">&#x27;杨过&#x27;</span>,<span class="hljs-string">&#x27;0000000&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-string">&#x27;1980-01-01&#x27;</span>,<span class="hljs-string">&#x27;13388886623&#x27;</span>,<span class="hljs-string">&#x27;北京市朝阳区北苑家园茉莉园20号楼&#x27;</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2015-02-01 03:52:07&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>),(<span class="hljs-number">15</span>,<span class="hljs-string">&#x27;zhaomin&#x27;</span>,<span class="hljs-string">&#x27;赵敏&#x27;</span>,<span class="hljs-string">&#x27;0000000&#x27;</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;1987-12-04&#x27;</span>,<span class="hljs-string">&#x27;18099897657&#x27;</span>,<span class="hljs-string">&#x27;北京市昌平区天通苑3区12号楼&#x27;</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,<span class="hljs-string">&#x27;2015-09-12 12:02:12&#x27;</span>,<span class="hljs-keyword">NULL</span>,<span class="hljs-keyword">NULL</span>);</code></pre></div>

<h3 id="3-项目搭建"><a href="#3-项目搭建" class="headerlink" title="3 项目搭建"></a>3 项目搭建</h3><ol>
<li><p>搭建一个maven web项目</p>
</li>
<li><p>配置Tomcat</p>
</li>
<li><p>测试Tomcat服务器能否跑起来</p>
</li>
<li><p>导入项目中可能遇到的jar包</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet.jsp-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet.jsp.jstl<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jstl-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>taglibs<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>standard<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span></code></pre></div>
</li>
<li><p>创建项目包结构</p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20210126212615538.png" alt="image-20210126212615538"></p>
</li>
<li><p>编写实体类</p>
<p>ORM映射：表-类映射</p>
</li>
<li><p>编写基础公共类</p>
<ol>
<li><p>数据库配置文件</p>
<div class="code-wrapper"><pre><code class="hljs properties"><span class="hljs-attr">driver</span>=<span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
<span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/jdbc?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT</span>
<span class="hljs-attr">username</span>=<span class="hljs-string">root</span>
<span class="hljs-attr">password</span>=<span class="hljs-string">root</span></code></pre></div>
</li>
<li><p>操作数据库的公共类</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseDao</span> </span>&#123;
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String driver;
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String url;
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String username;
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String password;

	<span class="hljs-comment">// 静态代码块,类加载的时候就初始化了</span>
	<span class="hljs-keyword">static</span> &#123;
		Properties properties = <span class="hljs-keyword">new</span> Properties();
		<span class="hljs-comment">// 通过类加载器读取对应的资源</span>
		InputStream is = BaseDao.class.getClassLoader().getResourceAsStream(<span class="hljs-string">&quot;db.properties&quot;</span>);
		<span class="hljs-keyword">try</span> &#123;
			properties.load(is);
			;
		&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;
			e.printStackTrace();
		&#125;

		driver = properties.getProperty(<span class="hljs-string">&quot;driver&quot;</span>);
		url = properties.getProperty(<span class="hljs-string">&quot;url&quot;</span>);
		username = properties.getProperty(<span class="hljs-string">&quot;username&quot;</span>);
		password = properties.getProperty(<span class="hljs-string">&quot;password&quot;</span>);
	&#125;

	<span class="hljs-comment">// 获取数据的连接</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title">getConnection</span><span class="hljs-params">()</span> </span>&#123;
		Connection connection = <span class="hljs-keyword">null</span>;
		<span class="hljs-keyword">try</span> &#123;
			Class.forName(driver);
			connection = DriverManager.getConnection(url, username, password);
		&#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;
			e.printStackTrace();
		&#125;
		<span class="hljs-keyword">return</span> connection;
	&#125;

	<span class="hljs-comment">// 编写查询公共方法</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ResultSet <span class="hljs-title">execute</span><span class="hljs-params">(Connection connection, String sql, Object[] params, ResultSet resultSet, PreparedStatement preparedStatement)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;
		<span class="hljs-comment">// 预编译的sql,在后面直接执行就可以了</span>
		preparedStatement = connection.prepareStatement(sql);
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; params.length; i++) &#123;
			<span class="hljs-comment">// setObject,占位符从1开始,但是我们的数字时从0开始</span>
			preparedStatement.setObject(i + <span class="hljs-number">1</span>, params[i]);
		&#125;
		resultSet = preparedStatement.executeQuery();
		<span class="hljs-keyword">return</span> resultSet;
	&#125;

	<span class="hljs-comment">// 编写增删改公共方法</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">execute</span><span class="hljs-params">(Connection connection, String sql, Object[] params, PreparedStatement preparedStatement)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;
		preparedStatement = connection.prepareStatement(sql);
		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; params.length; i++) &#123;
			<span class="hljs-comment">// setObject,占位符从1开始,但是我们的数字时从0开始</span>
			preparedStatement.setObject(i + <span class="hljs-number">1</span>, params[i]);
		&#125;
		<span class="hljs-keyword">return</span> preparedStatement.executeUpdate(); <span class="hljs-comment">// 返回更新的行数</span>
	&#125;
	
	<span class="hljs-comment">// 释放资源</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">closeResource</span><span class="hljs-params">(Connection connection, PreparedStatement preparedStatement, ResultSet resultSet)</span> </span>&#123;
		<span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">true</span>;

		<span class="hljs-keyword">if</span> (resultSet != <span class="hljs-keyword">null</span>) &#123;
			<span class="hljs-keyword">try</span> &#123;
				resultSet.close();
				<span class="hljs-comment">// GC回收</span>
			&#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;
				e.printStackTrace();
				flag = <span class="hljs-keyword">false</span>;
			&#125;
		&#125;

		<span class="hljs-keyword">if</span> (preparedStatement != <span class="hljs-keyword">null</span>) &#123;
			<span class="hljs-keyword">try</span> &#123;
				preparedStatement.close();
				<span class="hljs-comment">// GC回收</span>
			&#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;
				e.printStackTrace();
				flag = <span class="hljs-keyword">false</span>;
			&#125;
		&#125;

		<span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;
			<span class="hljs-keyword">try</span> &#123;
				connection.close();
				<span class="hljs-comment">// GC回收</span>
			&#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;
				e.printStackTrace();
				flag = <span class="hljs-keyword">false</span>;
			&#125;
		&#125;
		<span class="hljs-keyword">return</span> flag;
	&#125;
&#125;</code></pre></div>
</li>
<li><p>编写字符编码过滤器</p>
</li>
</ol>
</li>
<li><p>导入静态资源</p>
</li>
</ol>
<h3 id="4-登录功能的实现"><a href="#4-登录功能的实现" class="headerlink" title="4 登录功能的实现"></a>4 登录功能的实现</h3><ol>
<li><p>编写前端页面</p>
</li>
<li><p>设置首页</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--设置欢迎页面--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">welcome-file-list</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">welcome-file</span>&gt;</span>login.jsp<span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">welcome-file-list</span>&gt;</span></code></pre></div>
</li>
<li><p>编写dao层登录用户登录的接口</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// 得到要登陆的用户</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getLoginUser</span><span class="hljs-params">(Connection connection, String userCode)</span> <span class="hljs-keyword">throws</span> SQLException</span>;</code></pre></div>
</li>
<li><p>编写dao接口的实现类</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDao</span> </span>&#123;
	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getLoginUser</span><span class="hljs-params">(Connection connection, String userCode)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;

		PreparedStatement pstm = <span class="hljs-keyword">null</span>;
		ResultSet rs = <span class="hljs-keyword">null</span>;
		User user = <span class="hljs-keyword">null</span>;

		<span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;
			String sql = <span class="hljs-string">&quot;select * from smbms_user where userCode=?&quot;</span>;
			Object[] params = &#123;userCode&#125;;

			rs = BaseDao.execute(connection, pstm, rs, sql, params);

			<span class="hljs-keyword">if</span> (rs.next()) &#123;
				user = <span class="hljs-keyword">new</span> User();
				user.setId(rs.getInt(<span class="hljs-string">&quot;id&quot;</span>));
				user.setUserCode(rs.getString(<span class="hljs-string">&quot;userCode&quot;</span>));
				user.setUserName(rs.getString(<span class="hljs-string">&quot;userName&quot;</span>));
				user.setUserPassword(rs.getString(<span class="hljs-string">&quot;userPassword&quot;</span>));
				user.setGender(rs.getInt(<span class="hljs-string">&quot;gender&quot;</span>));
				user.setBirthday(rs.getDate(<span class="hljs-string">&quot;birthday&quot;</span>));
				user.setPhone(rs.getString(<span class="hljs-string">&quot;phone&quot;</span>));
				user.setAddress(rs.getString(<span class="hljs-string">&quot;address&quot;</span>));
				user.setUserRole(rs.getInt(<span class="hljs-string">&quot;userRole&quot;</span>));
				user.setCreatedBy(rs.getInt(<span class="hljs-string">&quot;createdBy&quot;</span>));
				user.setCreationDate(rs.getTimestamp(<span class="hljs-string">&quot;creationDate&quot;</span>));
				user.setModifyBy(rs.getInt(<span class="hljs-string">&quot;modifyBy&quot;</span>));
				user.setModifyDate(rs.getTimestamp(<span class="hljs-string">&quot;modifyDate&quot;</span>));
			&#125;
			BaseDao.closeResource(<span class="hljs-keyword">null</span>, pstm, rs);

		&#125;
		<span class="hljs-keyword">return</span> user;
	&#125;
&#125;</code></pre></div>
</li>
<li><p>业务层接口</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// 用户登录</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">login</span><span class="hljs-params">(String userCode, String password)</span></span>;</code></pre></div>
</li>
<li><p>业务层实现类</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>&#123;

	<span class="hljs-comment">// 业务层都会调用dao层,所以我们要引入Dao层</span>
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserDao userDao;

	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserServiceImpl</span><span class="hljs-params">()</span> </span>&#123;
		userDao = <span class="hljs-keyword">new</span> UserDaoImpl();
	&#125;

	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">login</span><span class="hljs-params">(String userCode, String password)</span> </span>&#123;
		Connection connection = <span class="hljs-keyword">null</span>;
		User user = <span class="hljs-keyword">null</span>;

		<span class="hljs-keyword">try</span> &#123;
			connection = BaseDao.getConnection();
			<span class="hljs-comment">// 通过业务层调用对应的具体的数据库操作</span>
			user = userDao.getLoginUser(connection, userCode);
		&#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;
			e.printStackTrace();
		&#125;<span class="hljs-keyword">finally</span> &#123;
			BaseDao.closeResource(connection, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);
		&#125;
		<span class="hljs-keyword">return</span> user;
	&#125;
	
&#125;</code></pre></div>
</li>
<li><p>编写Servlet</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;

   <span class="hljs-comment">// Servlet: 控制层,调用业务层代码</span>

   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
      System.out.println(<span class="hljs-string">&quot;LoginServlet---start....&quot;</span>);

      <span class="hljs-comment">// 获取用户名和密码</span>
      String userCode = req.getParameter(<span class="hljs-string">&quot;userCode&quot;</span>);
      String userPassword = req.getParameter(<span class="hljs-string">&quot;userPassword&quot;</span>);

      <span class="hljs-comment">// 和数据库中的密码进行对比,调用业务层</span>
      UserService userService = <span class="hljs-keyword">new</span> UserServiceImpl();
      User user = userService.login(userCode, userPassword);  <span class="hljs-comment">// 这里已经把登录的人给查出来了</span>
      <span class="hljs-keyword">if</span> (user != <span class="hljs-keyword">null</span>) &#123; <span class="hljs-comment">// 查由此人,可以登录</span>
         <span class="hljs-comment">// 将用户的信息放到Session中;</span>
         req.getSession().setAttribute(Constants.USER_SESSION, user);
         <span class="hljs-comment">// 跳转到主页</span>
         resp.sendRedirect(<span class="hljs-string">&quot;jsp/frame.jsp&quot;</span>);
      &#125;<span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// 查无此人,无法登录</span>
         <span class="hljs-comment">// 转发回登录页面,顺便提示他,用户名或密码错误</span>
         req.getRequestDispatcher(<span class="hljs-string">&quot;login.jsp&quot;</span>).forward(req, resp);

      &#125;
   &#125;

   <span class="hljs-meta">@Override</span>
   <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
      doGet(req, resp);
   &#125;
&#125;</code></pre></div>
</li>
<li><p>注册Servlet</p>
<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--Servlet--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>LoginServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.pnca.servlet.user.LoginServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>LoginServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/login.do<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span></code></pre></div>



</li>
</ol>
<h3 id="5-登录功能优化"><a href="#5-登录功能优化" class="headerlink" title="5 登录功能优化"></a>5 登录功能优化</h3><ul>
<li><p>注销</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogoutServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span> </span>&#123;
	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
		<span class="hljs-comment">// 移除用户的Constants.USER_SESSION</span>
		req.getSession().removeAttribute(Constants.USER_SESSION);
		resp.sendRedirect(req.getContextPath() + <span class="hljs-string">&quot;/login.jsp&quot;</span>); <span class="hljs-comment">// 返回登录页面</span>
	&#125;

	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
		doGet(req, resp);
	&#125;
&#125;</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>LogoutServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.pnca.servlet.user.LogoutServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>LogoutServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/jsp/logout.do<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span></code></pre></div>

</li>
</ul>
<p><strong>登录拦截优化</strong></p>
<ul>
<li><p>拦截过滤器</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SysFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>&#123;
	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException </span>&#123;

	&#125;

	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException </span>&#123;
		HttpServletRequest request = (HttpServletRequest) servletRequest;
		HttpServletResponse response = (HttpServletResponse) servletResponse;

		<span class="hljs-comment">// 过滤器,从Session中获取用户</span>
		User user = (User) request.getSession().getAttribute(Constants.USER_SESSION);
		<span class="hljs-keyword">if</span> (user == <span class="hljs-keyword">null</span>) &#123; <span class="hljs-comment">// 已经被移除或者注销了,或者未登录</span>
			response.sendRedirect(<span class="hljs-string">&quot;/smbms/error.jsp&quot;</span>);
		&#125;<span class="hljs-keyword">else</span>&#123;
			filterChain.doFilter(servletRequest, servletResponse);
		&#125;
	&#125;

	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span> </span>&#123;

	&#125;
&#125;</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--用户登录过滤器--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>SysFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.pnca.filter.SysFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>SysFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/jsp/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span></code></pre></div>

</li>
</ul>
<h3 id="6-密码修改"><a href="#6-密码修改" class="headerlink" title="6 密码修改"></a>6 密码修改</h3><ol>
<li><p>导入前端素材 </p>
</li>
<li><p>写项目，建议从底层向上写</p>
<p><img src="/uploads/loading.jpg" srcset="/img/loading.gif" lazyload data-original="/2020/11/22/JavaWeb%E5%AD%A6%E4%B9%A0/image-20210131202002445.png" alt="image-20210131202002445"></p>
</li>
<li><p>UserDao接口</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// 修改当前的用户密码</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">updatePassword</span><span class="hljs-params">(Connection connection, <span class="hljs-keyword">int</span> id, <span class="hljs-keyword">int</span> password)</span> <span class="hljs-keyword">throws</span> SQLException</span>;</code></pre></div>
</li>
<li><p>UserDao</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// 修改当前的用户密码</span>
	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">updatePassword</span><span class="hljs-params">(Connection connection, <span class="hljs-keyword">int</span> id, <span class="hljs-keyword">int</span> password)</span> <span class="hljs-keyword">throws</span> SQLException</span>&#123;
		PreparedStatement pstm = <span class="hljs-keyword">null</span>;
		<span class="hljs-keyword">int</span> execute = <span class="hljs-number">0</span>;
		<span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;
			String sql = <span class="hljs-string">&quot;update smbms.smbms_user set userPassword = ? where id = ?&quot;</span>;
			Object[] params = &#123;password, id&#125;;
			execute = BaseDao.execute(connection, pstm, sql, params);
			BaseDao.closeResource(connection, pstm, <span class="hljs-keyword">null</span>);
		&#125;
		<span class="hljs-keyword">return</span> execute;
    &#125;</code></pre></div>
</li>
<li><p>UserService层</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// 根据用户id修改当前的用户密码</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">updatePassword</span><span class="hljs-params">( <span class="hljs-keyword">int</span> id, <span class="hljs-keyword">int</span> password)</span></span>;</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">updatePassword</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id, <span class="hljs-keyword">int</span> password)</span> </span>&#123;
		Connection connection = <span class="hljs-keyword">null</span>;
		<span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">false</span>;

		<span class="hljs-keyword">try</span> &#123;
			connection = BaseDao.getConnection();
			<span class="hljs-comment">// 通过业务层调用对应的具体的数据库操作</span>
			<span class="hljs-keyword">if</span> (userDao.updatePassword(connection, id, password) &gt; <span class="hljs-number">0</span>) &#123;
				flag = <span class="hljs-keyword">true</span>;
			&#125;
		&#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;
			e.printStackTrace();
		&#125; <span class="hljs-keyword">finally</span> &#123;
			BaseDao.closeResource(connection, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);
		&#125;
		<span class="hljs-keyword">return</span> flag;
	&#125;</code></pre></div>
</li>
<li><p>UserServlet层</p>
<div class="code-wrapper"><pre><code class="hljs java">	<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
	<span class="hljs-comment">// 从Session里面拿id</span>
	Object attribute = req.getSession().getAttribute(Constants.USER_SESSION);
	<span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">false</span>;
	String newpassword = req.getParameter(<span class="hljs-string">&quot;newpassword&quot;</span>);
	<span class="hljs-keyword">if</span> (attribute != <span class="hljs-keyword">null</span> &amp;&amp; !StringUtils.isNullOrEmpty(newpassword)) &#123;
		UserService userService = <span class="hljs-keyword">new</span> UserServiceImpl();
		flag = userService.updatePassword(((User) attribute).getId(), newpassword);
		<span class="hljs-keyword">if</span> (flag) &#123;
			req.setAttribute(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;修改密码成功,请退出,使用新密码登录&quot;</span>);
			<span class="hljs-comment">// 密码修改成功,移除Session</span>
			req.getSession().removeAttribute(Constants.USER_SESSION);
		&#125;<span class="hljs-keyword">else</span>&#123;
			req.setAttribute(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;修改密码失败&quot;</span>);
		&#125;
	&#125; <span class="hljs-keyword">else</span> &#123;
		req.setAttribute(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;新密码有问题!&quot;</span>);
	&#125;
	req.getRequestDispatcher(<span class="hljs-string">&quot;pwdmodify.jsp&quot;</span>).forward(req, resp);
&#125;</code></pre></div>
</li>
<li><p>记得实现复用，需要提取方法</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
		String method = req.getParameter(<span class="hljs-string">&quot;method&quot;</span>);
		<span class="hljs-keyword">if</span> (method.equals(<span class="hljs-string">&quot;savepwd&quot;</span>)) &#123;
			<span class="hljs-keyword">this</span>.updatePwd(req, resp);
		&#125;
	&#125;</code></pre></div>



</li>
</ol>
<h3 id="7-用户管理"><a href="#7-用户管理" class="headerlink" title="7 用户管理"></a>7 用户管理</h3><ol>
<li><p>UserDao接口</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// 查询用户总数</span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getUserCount</span><span class="hljs-params">(Connection connection, String username, <span class="hljs-keyword">int</span> userRole)</span> <span class="hljs-keyword">throws</span> SQLException</span>;</code></pre></div>
</li>
<li><p>UserDaoImpl</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// 根据用户名或者角色查询用户总数</span>
	<span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserCount</span><span class="hljs-params">(Connection connection, String username, <span class="hljs-keyword">int</span> userRole)</span> <span class="hljs-keyword">throws</span> SQLException </span>&#123;
		PreparedStatement pstm = <span class="hljs-keyword">null</span>;
		ResultSet rs = <span class="hljs-keyword">null</span>;
		<span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;
		<span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;
			StringBuilder sql = <span class="hljs-keyword">new</span> StringBuilder();
			sql.append(<span class="hljs-string">&quot;select count(1) as count from smbms.smbms_user u, smbms.smbms_role r where u.userRole = r.id&quot;</span>);
			ArrayList&lt;Object&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();

			<span class="hljs-keyword">if</span> (!StringUtils.isNullOrEmpty(username)) &#123;
				sql.append(<span class="hljs-string">&quot; and u.userName like ?&quot;</span>);
				list.add(<span class="hljs-string">&quot;%&quot;</span> + username + <span class="hljs-string">&quot;%&quot;</span>);
			&#125;

			<span class="hljs-keyword">if</span> (userRole &gt; <span class="hljs-number">0</span>) &#123;
				sql.append(<span class="hljs-string">&quot; and u.userRole = ?&quot;</span>);
				list.add(userRole);
			&#125;
			Object[] params = list.toArray();
<span class="hljs-comment">//			System.out.println(&quot;UserDaoIml-&gt;getUserCount:&quot; + sql.toString());</span>
			rs = BaseDao.execute(connection, pstm, rs, sql.toString(), params);
			<span class="hljs-keyword">if</span> (rs.next()) &#123;
				count = rs.getInt(<span class="hljs-string">&quot;count&quot;</span>);
			&#125;
			BaseDao.closeResource(<span class="hljs-keyword">null</span>, pstm, rs);
		&#125;
		<span class="hljs-keyword">return</span> count;
	&#125;</code></pre></div>
</li>
<li><p>UserService层</p>
<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// 查询记录数</span>
	<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">getUserCount</span><span class="hljs-params">(String username, <span class="hljs-keyword">int</span> userRole)</span></span>;</code></pre></div>

<div class="code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span>
	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserCount</span><span class="hljs-params">(String username, <span class="hljs-keyword">int</span> userRole)</span> </span>&#123;
		Connection connection = <span class="hljs-keyword">null</span>;
		<span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;

		<span class="hljs-keyword">try</span> &#123;
			connection = BaseDao.getConnection();
			count = userDao.getUserCount(connection, username, userRole);
		&#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;
			e.printStackTrace();
		&#125; <span class="hljs-keyword">finally</span> &#123;
			BaseDao.closeResource(connection, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">null</span>);
		&#125;
		<span class="hljs-keyword">return</span> count;
	&#125;
</code></pre></div>
</li>
<li><p>UserServlet层</p>
<div class="code-wrapper"><pre><code class="hljs java">	<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException </span>&#123;
	<span class="hljs-comment">// 从Session里面拿id</span>
	Object attribute = req.getSession().getAttribute(Constants.USER_SESSION);
	<span class="hljs-keyword">boolean</span> flag = <span class="hljs-keyword">false</span>;
	String newpassword = req.getParameter(<span class="hljs-string">&quot;newpassword&quot;</span>);
	<span class="hljs-keyword">if</span> (attribute != <span class="hljs-keyword">null</span> &amp;&amp; !StringUtils.isNullOrEmpty(newpassword)) &#123;
		UserService userService = <span class="hljs-keyword">new</span> UserServiceImpl();
		flag = userService.updatePassword(((User) attribute).getId(), newpassword);
		<span class="hljs-keyword">if</span> (flag) &#123;
			req.setAttribute(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;修改密码成功,请退出,使用新密码登录&quot;</span>);
			<span class="hljs-comment">// 密码修改成功,移除Session</span>
			req.getSession().removeAttribute(Constants.USER_SESSION);
		&#125;<span class="hljs-keyword">else</span>&#123;
			req.setAttribute(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;修改密码失败&quot;</span>);
		&#125;
	&#125; <span class="hljs-keyword">else</span> &#123;
		req.setAttribute(<span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;新密码有问题!&quot;</span>);
	&#125;
	req.getRequestDispatcher(<span class="hljs-string">&quot;pwdmodify.jsp&quot;</span>).forward(req, resp);
&#125;</code></pre></div>
</li>
<li><p>记得实现复用，需要提取方法</p>
</li>
</ol>
<h2 id="14，文件上传"><a href="#14，文件上传" class="headerlink" title="14，文件上传"></a>14，文件上传</h2>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Java/">Java</a>
                    
                      <a class="hover-with-bg" href="/categories/Java/Spring/">Spring</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/01/17/Spring5%E5%AD%A6%E4%B9%A0/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Spring5 学习</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/11/22/JUCStudy/">
                        <span class="hidden-mobile">JUC 学习</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.2/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>












  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


<script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=a;var i=n.imageLazyLoadSetting.isSPA,o=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function a(){i&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var a=0;a<r.length;a++)t=r[a],0<=(e=t.getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(n.innerHeight*o||document.documentElement.clientHeight*o)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}();var t,e}a(),n.addEventListener("scroll",function(){var t,e;t=a,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body>
</html>
